## QA

### QA Junior

###### –ß–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø–æ—Ç–æ–∫–∞?

_–ü—Ä–æ—Ü–µ—Å—Å_¬†- —ç—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã–¥–µ–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

_–ü–æ—Ç–æ–∫_¬†- —Å–ø–æ—Å–æ–± –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è¬†_–ø—Ä–æ—Ü–µ—Å—Å–∞_, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ.¬†_–ü–æ—Ç–æ–∫_¬†–≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ¬†_–ø—Ä–æ—Ü–µ—Å—Å–∞_

###### –ß—Ç–æ —Ç–∞–∫–æ–µ¬†_¬´–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å¬ª_? –ö–∞–∫–æ–π —Ç–∏–ø –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Java? –ß–µ–º –æ–±—É—Å–ª–æ–≤–ª–µ–Ω —ç—Ç–æ—Ç –≤—ã–±–æ—Ä?

**–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å**¬†- —ç—Ç–æ —Å–ø–æ—Å–æ–± –¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –æ–±—è–∑–∞–Ω –æ—Ç–¥–∞–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–º—É –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ - –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –º–µ–Ω—å—à–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ - –µ—Å–ª–∏ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –∑–∞–≤–∏—Å –∏–ª–∏ –≤–µ–¥–µ—Ç —Å–µ–±—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Ç–æ –∑–∞–≤–∏—Å–∞–µ—Ç —Ü–µ–ª–∏–∫–æ–º –≤—Å—è —Å–∏—Å—Ç–µ–º–∞ –∏ –¥—Ä—É–≥–∏–µ –ø–æ—Ç–æ–∫–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ª—É—á–∞—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

Java –∏—Å–ø–æ–ª—å–∑—É–µ—Ç¬†**–≤—ã—Ç–µ—Å–Ω—è—é—â—É—é –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å**, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π —Ä–µ—à–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É, –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å—à–∏–µ –ø–æ—Ç–æ–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–µ ¬´–ø–æ–¥–≤–µ—à–∏–≤–∞—é—Ç¬ª –≤—Å—é —Å–∏—Å—Ç–µ–º—É —Ü–µ–ª–∏–∫–æ–º. –ó–∞ —Å—á—ë—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ —Ç–∞–∫–∂–µ —É–ª—É—á—à–∞–µ—Ç—Å—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã—Ç–µ—Å–Ω—è—é—â–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, —Ç–µ–º, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –æ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞.

###### –ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ –≤ Java?

–û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–∞: NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING, TERMINATED.

- **–ù–æ–≤—ã–π (New)**. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø–æ—Ç–æ–∫–∞, –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ù–æ–≤—ã–π –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤—ã–∑–≤–∞–Ω –º–µ—Ç–æ–¥¬†`start()`. –í —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ—Ç–æ–∫ –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∂–∏–≤—ã–º.
- **–†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π (Runnable)**. –ü–æ—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥¬†`start()`. –ü–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –≤ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–∫–∂–µ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –†–∞–±–æ—Ç–∞—é—â–∏–π –∏–ª–∏ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω. –ö–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –æ–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è –∂–∏–≤—ã–º.
- **–†–∞–±–æ—Ç–∞—é—â–∏–π (Running)**. –ü–æ—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –†–∞–±–æ—Ç–∞—é—â–∏–π, –∫–æ–≥–¥–∞ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–æ—Ç–æ–∫–æ–≤ –≤—ã–±–∏—Ä–∞–µ—Ç –µ–≥–æ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç.
- **–ñ–∏–≤–æ–π, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π (Alive, but not runnable)**. –ü–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –∂–∏–≤—ã–º, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
    - **–û–∂–∏–¥–∞–Ω–∏–µ (Waiting)**. –ü–æ—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –û–∂–∏–¥–∞–Ω–∏—è, –≤—ã–∑—ã–≤–∞—è –º–µ—Ç–æ–¥¬†`wait()`. –í—ã–∑–æ–≤¬†`notify()`¬†–∏–ª–∏¬†`notifyAll()`¬†–º–æ–∂–µ—Ç –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –ø–æ—Ç–æ–∫ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –û–∂–∏–¥–∞–Ω–∏—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π.
    - **–°–æ–Ω (Sleeping)**. –ú–µ—Ç–æ–¥¬†`sleep()`¬†–ø–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–æ—Ç–æ–∫ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –°–Ω–∞ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö.
    - **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Blocked)**. –ü–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –≤ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–∞, —Ç–∞–∫–æ–≥–æ –∫–∞–∫ –≤–≤–æ–¥/–≤—ã–≤–æ–¥ –∏–ª–∏ –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥—Ä—É–≥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–æ—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π, –∫–æ–≥–¥–∞ —Ä–µ—Å—É—Ä—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–µ–Ω.
    - **–ú—ë—Ä—Ç–≤—ã–π (Dead)**. –ü–æ—Ç–æ–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è –º—ë—Ä—Ç–≤—ã–º, –∫–æ–≥–¥–∞ –µ–≥–æ –º–µ—Ç–æ–¥¬†`run()`¬†–ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω. –ú—ë—Ä—Ç–≤—ã–π –ø–æ—Ç–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –Ω–∏ –≤ –∫–∞–∫–æ–µ –¥—Ä—É–≥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–ª—è –Ω–µ–≥–æ –≤—ã–∑–≤–∞–Ω –º–µ—Ç–æ–¥¬†`start()`.

![thread-states](../../../_res/thread-states.png)

###### ¬†–û–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏?

–í Java –ø–∞–º—è—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±–ª–∞—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è JVM –∏ –º–æ–≥—É—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ. –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑ –Ω–∏—Ö:

1. **Heap (–ö—É—á–∞)**¬†‚Äì –æ–±—â–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤. –ó–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–±—ä–µ–∫—Ç—ã –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∏—Ö.
2. **Stack (–°—Ç–µ–∫ –ø–æ—Ç–æ–∫–∞)**¬†‚Äì –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤.
3. **–ú–µ—Ç–∞—Å–ø–µ–π—Å (Metaspace)**¬†‚Äì –æ–±–ª–∞—Å—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∞—Å—Å–∞—Ö.
4. **–†–∞–±–æ—á–∞—è –ø–∞–º—è—Ç—å –ø–æ—Ç–æ–∫–∞ (Thread Working Memory)**¬†‚Äì –∫—ç—à –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–º—è—Ç–∏.

üí°¬†**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**  
–ï—Å–ª–∏ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –∏–∑–º–µ–Ω—è–µ—Ç –æ–±—ä–µ–∫—Ç –≤¬†`Heap`, –∞ –¥—Ä—É–≥–æ–π —á–∏—Ç–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑¬†`Thread Working Memory`, –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (data race).

**–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å?**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†`volatile`, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π –Ω–∏—Ç–∏ –±—ã–ª–∏ –≤–∏–¥–Ω—ã –¥—Ä—É–≥–∏–º.
- –ü—Ä–∏–º–µ–Ω—è—Ç—å¬†`synchronized`¬†–∏¬†`Lock`¬†–¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
###### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–ª–∞—Å—Å?

- –í–æ-–ø–µ—Ä–≤—ã—Ö —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å [[../../../_inforage/Java/Core/Immutable Class]]
- –î–ª—è mutable –∫–ª–∞—Å—Å–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `synchronized` –∏–ª–∏ –±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ `ReadWriteLock`.
- –ß–µ—Ä–µ–∑ –≥–µ—Ç –Ω—É–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–æ–ø–∏—é –æ–±—ä–µ–∫—Ç–∞, –∫ –ø—Ä–∏–º–µ—Ä—É CopyOnWriteArrayList
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–µ—Ä–µ–¥–∞–µ–º —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –Ω—É–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –≤–Ω–µ–¥—Ä—è—Ç—å –≤ –ø–æ–ª–µ
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Record –∏–ª–∏ @Value –æ—Ç –ª–æ–º–±–æ–∫–∞, —Å–¥–µ–ª–∞–µ—Ç –∫–ª–∞—Å—Å –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º

###### –ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –º–µ—Ç–æ–¥—ã¬†`Thread.sleep()`¬†–∏¬†`Thread.yield()`?

–ú–µ—Ç–æ–¥¬†`yield()`¬†—Å–ª—É–∂–∏—Ç –ø—Ä–∏—á–∏–Ω–æ–π —Ç–æ–≥–æ, —á—Ç–æ –ø–æ—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—â–∏–π (running) –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π (runnable), –¥–∞–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–∞–º –∞–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è. –ù–æ —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –∏ –Ω–µ –±—ã—Ç—å –¥—Ä—É–≥–∏–º.

–ú–µ—Ç–æ–¥¬†`sleep()`¬†–≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞—Å—ã–ø–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Å —Ä–∞–±–æ—Ç–∞—é—â–∏–π (running) –Ω–∞ –æ–∂–∏–¥–∞—é—â–∏–π (waiting).

###### –ß—Ç–æ –∑–Ω–∞—á–∏—Ç¬†_¬´–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ—Ç–æ–∫–∞¬ª_?

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–æ—Ç–æ–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ —Ç–æ–º, –∫–æ–≥–¥–∞ –∫–∞–∫–æ–º—É –∏–∑ –ø–æ—Ç–æ–∫–æ–≤ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, —á–µ–º –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–±—ä–µ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –ø–æ—Ç–æ–∫, —á–∞—Å—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –ø–æ–º–∏–º–æ –µ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞.

–ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ—Ç–æ–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞¬†`Thread`:¬†`final void setPriority(int level)`. –ó–Ω–∞—á–µ–Ω–∏–µ¬†`level`¬†–∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ—Ç¬†`Thread.MIN_PRIORITY = 1`¬†–¥–æ¬†`Thread.MAX_PRIORITY = 10`. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -¬†`Thread.NORM_PRlORITY = 5`.

–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–æ—Ç–æ–∫–∞ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞–≤ –º–µ—Ç–æ–¥:¬†`final int getPriority()`¬†—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞¬†`Thread`.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ¬†_¬´–ø–æ—Ç–æ–∫–∏-–¥–µ–º–æ–Ω—ã¬ª_?

–ü–æ—Ç–æ–∫–∏-–¥–µ–º–æ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –≤–º–µ—Å—Ç–µ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π, –Ω–æ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π —á–∞—Å—Ç—å—é –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ï—Å–ª–∏ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ —Ñ–æ–Ω–µ —Ä–∞–±–æ—Ç—ã –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –µ–≥–æ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–æ —Ç–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –∫–∞–∫ –ø–æ—Ç–æ–∫-–¥–µ–º–æ–Ω —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞¬†`setDaemon(boolean value)`, –≤—ã–∑–≤–∞–Ω–Ω–æ–≥–æ —É –ø–æ—Ç–æ–∫–∞ –¥–æ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞. –ú–µ—Ç–æ–¥¬†`boolean isDaemon()`¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–µ–º–æ–Ω–æ–º –∏–ª–∏ –Ω–µ—Ç. –ë–∞–∑–æ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤-–¥–µ–º–æ–Ω–æ–≤ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞-–¥–µ–º–æ–Ω–∞ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤) —Å –æ–∫–æ–Ω—á–∞–Ω–∏–µ–º –∫–æ–¥–∞ –º–µ—Ç–æ–¥–∞¬†`main()`, –Ω–µ –æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ—Ç–æ–∫-–¥–µ–º–æ–Ω –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

###### –ú–æ–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–µ–º–æ–Ω–æ–º?

–ù–µ—Ç. –ü–æ—Ç–æ–∫–∏-–¥–µ–º–æ–Ω—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –Ω–µ –º–æ–≥—É—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –±–µ–∑ –Ω–∏—Ö.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ¬†_ThreadLocal-–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è_?

`ThreadLocal`¬†- –∫–ª–∞—Å—Å, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∏–º–µ—è –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∏–º–µ—Ç—å —Ä–∞–∑–ª–∏—á–Ω–æ–µ –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –ø–æ—Ç–æ–∫–æ–≤.

–£ –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ - —Ç.–µ. —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞¬†`Thread`¬†- –µ—Å—Ç—å –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å –Ω–∏–º —Ç–∞–±–ª–∏—Ü–∞¬†_ThreadLocal-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö_. –ö–ª—é—á–∞–º–∏ —Ç–∞–±–ª–∏—Ü—ã —è–≤–ª—è—é—Ç—Å—è c—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã –∫–ª–∞—Å—Å–∞¬†`ThreadLocal`, –∞ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ - —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã, ¬´–∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ¬ª ThreadLocal-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, —Ç.–µ. ThreadLocal-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ–º, —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –î–æ—Å—Ç—É–ø –∫ –∑–Ω–∞—á–µ–Ω–∏—é –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã¬†`get()`¬†–∏–ª–∏¬†`set()`.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã –æ–±—ä—è–≤–∏–º ThreadLocal-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:¬†`ThreadLocal<Object> locals = new ThreadLocal<Object>();`. –ê –∑–∞—Ç–µ–º, –≤ –ø–æ—Ç–æ–∫–µ, —Å–¥–µ–ª–∞–µ–º¬†`locals.set(myObject)`, —Ç–æ –∫–ª—é—á–æ–º —Ç–∞–±–ª–∏—Ü—ã –±—É–¥–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç¬†`locals`, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º - —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç¬†`myObject`. –ü—Ä–∏ —ç—Ç–æ–º –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ¬´–ø–æ–ª–æ–∂–∏—Ç—å¬ª –≤–Ω—É—Ç—Ä—å¬†`locals`¬†–¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

–°–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ¬†`ThreadLocal`¬†–∏–∑–æ–ª–∏—Ä—É–µ—Ç –∏–º–µ–Ω–Ω–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã, –∞ –Ω–µ —Å–∞–º–∏ –æ–±—ä–µ–∫—Ç—ã. –ï—Å–ª–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –ø–æ—Ç–æ–∫–æ–≤ —Å—Å—ã–ª–∫–∏ –≤–µ–¥—É—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç, —Ç–æ –≤–æ–∑–º–æ–∂–Ω—ã –∫–æ–ª–ª–∏–∑–∏–∏.

–¢–∞–∫ –∂–µ –≤–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Ç.–∫. ThreadLocal-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ –ø–æ—Ç–æ–∫–∞—Ö, —Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ —Ç–æ–º –∂–µ –ø–æ—Ç–æ–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –û—à–∏–±–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞¬†`set()`) –≤ –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø–æ—Ç–æ–º—É –∫–∞–∫ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –≤ –º–µ—Ç–æ–¥–µ¬†`set()`, –±—É–¥–µ—Ç ¬´–∑–∞—Ö–≤–∞—á–µ–Ω–æ¬ª –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞¬†`get()`¬†–≤ —Ü–µ–ª–µ–≤–æ–º –ø–æ—Ç–æ–∫–µ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω¬†`null`.
###### –ß—Ç–æ –∑–Ω–∞—á–∏—Ç¬†_¬´—É—Å—ã–ø–∏—Ç—å¬ª_¬†–ø–æ—Ç–æ–∫?

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏, –≤—ã–∑–≤–∞–≤ –≤ —Ö–æ–¥–µ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥¬†`Thread.sleep()`¬†–ø–µ—Ä–µ–¥–∞–≤ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö. –î–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–≤–µ–¥–µ–Ω –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–∑–æ–≤–æ–º¬†`interrupt()`¬†—Å –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ–º¬†`InterruptedException`.
###### –ß–µ–º Thread –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç Runnable? –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Thread, –∞ –∫–æ–≥–¥–∞ Runnable?¬†

_Thread_¬†- –∫–ª–∞—Å—Å-–Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –ø–æ—Ç–æ–∫–æ–º.
_Runnable_¬†- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –Ω–∞–¥ –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–π –∑–∞–¥–∞—á–µ–π.

- **Thread**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∞–º–∏–º –ø–æ—Ç–æ–∫–æ–º
- **Runnable**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –≤ –ø–æ—Ç–æ–∫–µ. –û–Ω –±–æ–ª–µ–µ –≥–∏–±–æ–∫ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–¥–∞—á–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö

###### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ç–æ–¥¬†`Thread.join()`?

–ö–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ –≤—ã–∑—ã–≤–∞–µ—Ç¬†`join()`¬†–¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞, —Ç–µ–∫—É—â–∏–π —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è, –Ω–µ –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω:

```java
void join()        
void join(long millis) 
void join(long millis, int nanos) 
```
###### –í —á–µ–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Callable –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Runnable –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Ç–æ–∫–æ–≤?

`Callable` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –º–æ–∂–µ—Ç –±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —á–µ–≥–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `Runnable`, —á—Ç–æ –¥–µ–ª–∞–µ—Ç `Callable` –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –∑–∞–¥–∞—á, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–µ.

###### –ö–∞–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è?

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ Java –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `synchronized` –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.
2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏: –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞.
3. `join()`¬†–ü–æ—Ç–æ–∫ –≤—ã–∑–≤–∞–≤—à–∏–π —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–±—ä–µ–∫—Ç, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª –≤—ã–∑–≤–∞–Ω —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ - –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç —Å–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
4. –û–±—ä–µ–∫—Ç—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ReentrantLock` –¥–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –≤–∫–ª—é—á–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è –∏ —Ç–∞–π–º-–∞—É—Ç–æ–≤.
5. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã: Phaser, CyclicBarrier, Semaphor, Exchanger, CountDownLatch

###### –ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–Ω–∏—Ç–æ—Ä? –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ Java?¬†

_–ú–æ–Ω–∏—Ç–æ—Ä_¬†- –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–µ–º—É —Ä–µ—Å—É—Ä—Å—É. –í Java —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞¬†`synchronized`

- –ú–æ–Ω–∏—Ç–æ—Ä –µ—Å–ª–∏ —É–ø—Ä–æ—â–µ–Ω–æ —ç—Ç–æ –Ω–µ–∫–∏–π —Ñ–ª–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –µ—Å—Ç—å —É –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
- –û–Ω –Ω—É–∂–µ–Ω –¥–ª—è –∏–∑–±–µ–≥–∞–Ω–∏—è –¥–∞—Ç–∞ —Ä–µ–π—Å–∞, –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤–æ–º —Ñ–ª–∞–≥–µ/–æ–±—ä–µ–∫—Ç–µ

###### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ –ø–æ—Ç–æ–∫ –º–æ–Ω–∏—Ç–æ—Ä –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞?

–ú–µ—Ç–æ–¥¬†`Thread.holdsLock(lock)`¬†–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`true`, –∫–æ–≥–¥–∞ —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä —É –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ Future?

`Future`¬†‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å¬†`ExecutorService`¬†–∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ API.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ CompletableFuture?

`CompletableFuture`¬†‚Äî —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞¬†`Future`, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ FutureTask?¬†

_FutureTask_¬†‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ Java, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–æ–π –∑–∞–¥–∞—á–∏, –∫–æ–≥–¥–∞ –æ–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è. –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –µ—â—ë –Ω–µ –∑–∞–∫–æ–Ω—á–µ–Ω–∞, –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç (–∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç) –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø–æ–∫–∞ –∑–∞–¥–∞—á–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.

`FutureTask`¬†‚Äî —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞¬†`RunnableFuture`, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤¬†`Runnable`¬†–∏¬†`Future`. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∞ –∑–∞—Ç–µ–º –ø–æ–ª—É—á–∞—Ç—å –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

###### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ¬†`FutureTask`,¬†`Future`¬†–∏¬†`CompletableFuture`

|–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å|FutureTask|Future|CompletableFuture|
|---|---|---|---|
|–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ|–î–∞|–î–∞|–î–∞|
|–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞|`get()`|`get()`|–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã (`thenApply`)|
|–û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á–∏|–î–∞|–î–∞|–î–∞|
|–ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á|–ù–µ—Ç|–ù–µ—Ç|–î–∞ (`thenCombine`,¬†`allOf`,¬†`anyOf`)|
|–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å|–ù–µ—Ç|–ù–µ—Ç|–î–∞|
|–°–ª–æ–∂–Ω–æ—Å—Ç—å|–ü—Ä–æ—Å—Ç–∞—è|–ü—Ä–æ—Å—Ç–∞—è|–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å|

1. **`FutureTask`**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è¬†`Runnable`¬†–∏¬†`Future`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤—Ä—É—á–Ω—É—é.
2. **`Future`**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, —Å –±–∞–∑–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ (`get`,¬†`cancel`).
3. **`CompletableFuture`**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∏–ª—è.

###### Completable Future vs Future

- **Future**: When using¬†`Future`, you submit a task to an¬†`ExecutorService`, and it returns a¬†`Future`¬†object. However, to get the result of the computation,¬†**you must call the¬†`get()`¬†method**, which blocks the calling thread until the task is complete. This can make your application less responsive, as it waits for the computation to finish.  
- **CompletableFuture**: With¬†`CompletableFuture`, you get non-blocking execution. It allows you to define what happens when the computation is done through methods like¬†**`thenApply()`,¬†`thenAccept()`, and**¬†`**thenRun()**`. This makes your application much more responsive, as it doesn't block the main thread while waiting for the result.
- [Difference Between CompletableFuture And Future In Java](https://www.hungrycoders.com/blog/difference-between-completablefuture-and-future-in-java)

```java
// Using Future
Future<String> future = executor.submit(() -> {
    Thread.sleep(2000);
    return "Hello, Future!";
});
String result = future.get();  // Blocks until the result is ready

// Using CompletableFuture
CompletableFuture.supplyAsync(() -> {
    Thread.sleep(2000);
    return "Hello, CompletableFuture!";
}).thenAccept(System.out::println);  // Non-blocking
```
###### –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤, –≤—ã–∑–≤–∞—Ç—å wait –∏–ª–∏ notify?

- IllegalMonitorStateException

###### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ExecutorService?

–û–Ω —Å–æ–∑–¥–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤.

###### –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤

- newSingleThreadPool() - —Å–æ–∑–¥–∞–µ—Ç –ø—É–ª–ª —Å 1 –ø–æ—Ç–æ–∫–æ–º
- newFixedThreadPool(int number) - —Å–æ–∑–¥–∞–µ—Ç –ø—É–ª–ª —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Ç–æ–∫–æ–≤  
- newCachedThreadPool() - —Å–æ–∑–¥–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø—É–ª–ª –ø–æ—Ç–æ–∫–æ–≤
- newScheduledThreadPool() - —Å–æ–∑–¥–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É–ª–ª –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é  
- newWorkStealingPool() - —Å–æ–∑–¥–∞–µ—Ç ForkJoinPool

###### ¬†Atomic vs Volatile¬†

**Atomic**¬†‚Äî –∫–ª–∞—Å—Å—ã (AtomicInteger, AtomicLong, –∏ —Ç.–¥.), –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

**Volatile**¬†‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å—Å—è –∏–∑ –ø–∞–º—è—Ç–∏, –∞ –Ω–µ –∏–∑ –∫—ç—à–∞ –ø–æ—Ç–æ–∫–∞. –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ volatile –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –Ω–æ –µ—Å–ª–∏ –¥–≤–∞ –ø–æ—Ç–æ–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

_**–ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**_

- **`volatile`**:
    - –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π.
    - –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ñ–ª–∞–≥–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
- **`Atomic`**:
    - –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π).
    - –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤, –∏–Ω–¥–µ–∫—Å–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ¬†`volatile`¬†–∏¬†`Atomic`**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞            | **`volatile`**               | **`Atomic`**                               |
| ------------------------- | ---------------------------- | ------------------------------------------ |
| –ì–∞—Ä–∞–Ω—Ç–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏        | –î–∞                           | –î–∞                                         |
| –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏        | –ù–µ—Ç                          | –î–∞                                         |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ             | –î–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏   | –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç, CAS)      |
| –ü—Ä–∏–º–µ—Ä –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–ª—É—á–∞–µ–≤ | –§–ª–∞–≥–∏ (`boolean isRunning`)  | –°—á—ë—Ç—á–∏–∫–∏ (`AtomicInteger.incrementAndGet`) |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å        | –í—ã—à–µ, —Ç–∞–∫ –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—â–µ | –ß—É—Ç—å –Ω–∏–∂–µ –∏–∑-–∑–∞ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏   |
###### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã atomic?

–ö–ª–∞—Å—Å—ã –∏–∑ –ø–∞–∫–µ—Ç–∞¬†`java.util.concurrent.atomic`¬†(–Ω–∞–ø—Ä–∏–º–µ—Ä,¬†`AtomicInteger`,¬†`AtomicLong`,¬†`AtomicReference`) –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç¬†**–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ**¬†–±–µ–∑ —è–≤–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.  
–û–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è:

1. **–û–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏**¬†(–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç, –¥–µ–∫—Ä–µ–º–µ–Ω—Ç, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –∑–∞–º–µ–Ω–∞) —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏.
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**¬†‚Äî –≤–º–µ—Å—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ CAS –æ–ø–µ—Ä–∞—Ü–∏–∏? (Compare And Swap)¬†

**CAS (Compare And Swap)**¬†‚Äî –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫. –ï—Å—Ç—å –¥–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–µ, —Å—Ç–∞—Ä–æ–µ –∏ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –°—Ç–∞—Ä–∞—è —ç—Ç–æ –≤–æ–ª–æ—Ç–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∞ —Ç–µ–∫—É—â–µ–µ –Ω–µ –≤–æ–ª–æ—Ç–∞–π–ª, –µ—Å–ª–∏ –æ–Ω–∏ —Ä–∞–≤–Ω—ã –∑–Ω–∞—á–∏—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç—å —Å–≤–∞–ø –Ω–∞ –Ω–æ–≤–æ–µ.

1. **–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ–º—É.
    - –ï—Å–ª–∏ –¥–∞, —Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.
    - –ï—Å–ª–∏ –Ω–µ—Ç, –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è.
2. **–≠—Ç–∞–ø—ã:**
    - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å –æ–∂–∏–¥–∞–µ–º—ã–º.
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç.

###### –í —á—ë–º –∑–∞–∫–ª—é—á–∞—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É¬†`java.util.concurrent.Atomic*.compareAndSwap()`¬†–∏¬†`java.util.concurrent.Atomic*.weakCompareAndSwap()`.

- `weakCompareAndSwap()`¬†–Ω–µ —Å–æ–∑–¥–∞–µ—Ç¬†_memory barrier_¬†–∏ –Ω–µ –¥–∞–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏¬†_happens-before_;
- `weakCompareAndSwap()`¬†—Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—ç—à–∞/CPU, –∏ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å¬†`false`¬†–±–µ–∑ –≤–∏–¥–∏–º—ã—Ö –ø—Ä–∏—á–∏–Ω;
- `weakCompareAndSwap()`, –±–æ–ª–µ–µ –ª–µ–≥–∫–∞—è, –Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ–º–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–º–∏ –∏ –Ω–µ –≤—Å–µ–≥–¥–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è.
###### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã volatile?

–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ¬†**`volatile`**¬†–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º –±—É–¥—É—Ç¬†**–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–∏–¥–Ω—ã –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–∞–º**. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –ø–æ—Ç–æ–∫–∞—Ö.

- **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**  
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ:
    - –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏;
    - —á–∏—Ç–∞—é—Ç—Å—è —á–∞—Å—Ç–æ, –Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è¬†`volatile`:**

1. –ù–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä,¬†`count++`¬†–≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ).
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ñ–ª–∞–≥–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –≥–¥–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏–∏ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏.
###### –ß–µ–º CopyOnWriteCollections –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö?

–≠—Ç–æ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (_CopyOnWriteArrayList_,¬†_CopyOnWriteArraySet_).

- –ò–∑–º–µ–Ω–µ–Ω–∏–µ: –ü—Ä–∏ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `add`, `set`, `remove`) —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∫–æ–ø–∏—è –º–∞—Å—Å–∏–≤–∞, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞—Å—Å–∏–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤. –≠—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è.
- –ß—Ç–µ–Ω–∏–µ: –ß—Ç–µ–Ω–∏–µ –∏–∑ `CopyOnWriteArrayList` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è –∏ –Ω–µ–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏.
- **–°—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è**

###### –ö–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∫–∞–∫ –æ–Ω–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –∫—É—á–µ–π

- ConcurrentHashMap: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ—Ç–æ–∫–æ–≤ –∏ –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- CopyOnWriteArrayList: –°–æ–∑–¥–∞–µ—Ç –∫–æ–ø–∏–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –º–∞—Å—Å–∏–≤–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –¥–ª—è —á–∞—Å—Ç–æ–≥–æ —á—Ç–µ–Ω–∏—è.
- BlockingQueue: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π.

###### –ö–∞–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏?

–ï—Å–ª–∏ —É–ø–∞–ª –æ–¥–∏–Ω –ø–æ—Ç–æ–∫, –æ–Ω –ø–æ–ª–æ–∂–∏–ª –ø–æ Error –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Ç–æ–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º –ø–æ—Ç–æ–∫–æ–≤.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ shutdown –≤ ExecutorService?

- `shutdown()`: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏–µ–º –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ –æ–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö.
- `shutdownNow()`: –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–¥–∞—á.

###### –ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ExecutorService –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞–º–∏?

`ExecutorService` —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏, –ø–æ–∑–≤–æ–ª—è—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∏–∑ –ø—É–ª–∞, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ ‚Äî –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤.

15. –ö–∞–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –ø–æ–¥—Ö–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–æ—Ç–æ–∫–∞–º–∏?

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤ –≤–∫–ª—é—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É–ª–æ–≤, –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—é –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∑–∞–º–µ–Ω—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç.

16. –ö–∞–∫ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤?

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CountDownLatch` –∏–ª–∏ `CyclicBarrier` –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤

###### –ö–∞–∫ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Ç–æ–∫, –∏—Å–ø–æ–ª—å–∑—É—è –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏—è?

–ü–æ—Ç–æ–∫ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, `new Thread(() -> { /* –∫–æ–¥ */ }).start();`. –ü–æ—Ç–æ–º—É —á—Ç–æ Thread —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è Runnable —Å –æ–¥–Ω–∏–º –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –º–µ—Ç–æ–¥–æ–º.

###### –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Producer-Consumer —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ Java?

–í –ø–∞—Ç—Ç–µ—Ä–Ω–µ Producer-Consumer –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `BlockingQueue`, –≥–¥–µ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ, –∞ –¥—Ä—É–≥–æ–π –∏—Ö –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç.
###### –ú–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–∞, –ø–æ–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è¬†`static synchronized`¬†–º–µ—Ç–æ–¥?

–î–∞, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–∞, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º –∫–ª–∞—Å—Å–∞.
###### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ç–æ–¥ interrupt() –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

`interrupt()` –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–æ–∫, –ø–æ—Å—ã–ª–∞—è –µ–º—É —Å–∏–≥–Ω–∞–ª –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ç–æ–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –æ–∂–∏–¥–∞–Ω–∏–∏.

###### –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–±—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤?

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é, –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (`ReentrantLock`) –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ–Ω–∫–∏.

###### –ö–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω ¬´–æ–¥–∏–Ω –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å - –º–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π¬ª –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –Ω–∞ Java?

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ ¬´–æ–¥–∏–Ω –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å - –º–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π¬ª –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `BlockingQueue` –∏–ª–∏ `ExecutorService` —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏.

###### –ö–∞–∫–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ –ø–∞–∫–µ—Ç–∞ java.util.concurrent –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á?

`CompletableFuture` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ `java.util.concurrent` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

###### –í —á–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –∏–∑ –ø–∞–∫–µ—Ç–∞ java.util.concurrent –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –≤ Java?

–ö–ª–∞—Å—Å—ã –∏–∑ `java.util.concurrent` –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –∏ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã, —á–µ–º `Thread` –∏ `synchronized`, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

###### –ö–∞–∫–æ–π –∫–ª–∞—Å—Å –∏–∑ –ø–∞–∫–µ—Ç–∞ java.util.concurrent –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —á–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –∏–ª–∏ –º–µ—Ç–æ–¥—ã?

`ReentrantLock` ‚Äî –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤, –ø–æ–∑–≤–æ–ª—è—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏.

###### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ConcurrentHashMap –∏ –≤ —á–µ–º –µ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Hashtable –∏ synchronizedMap?

`ConcurrentHashMap` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ, —Å–µ–≥–º–µ–Ω—Ç–∏—Ä—É—è –¥–∞–Ω–Ω—ã–µ, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø–æ–ª–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ `Hashtable` –∏–ª–∏ `synchronizedMap`.
- [HashMap –∏ ConcurrentHashMap –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è—Ö](https://javarush.com/groups/posts/713-hashmap-i-concurrenthashmap-populjarnihe-voprosih-na-sobesedovanijakh)

32. –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

[Concurrent Collections](../../../_inforage/Java/–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–∫–∞/–ö–æ–ª–ª–µ–∫—Ü–∏–∏/Concurrent%20Collections.md)

###### –ö–∞–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ç–æ–∫?

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ Java –ø—Ä–∏–Ω—è—Ç —É–≤–µ–¥–æ–º–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–∞ (—Ö–æ—Ç—è JDK 1.0 –∏ –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–∞ –º–µ—Ç–æ–¥–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä¬†`stop()`,¬†`suspend()`¬†–∏¬†`resume()`¬†- –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö JDK –≤—Å–µ –æ–Ω–∏ –±—ã–ª–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫¬†`deprecated`¬†–∏–∑-–∑–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É–≥—Ä–æ–∑ –≤–∑–∞–∏–º–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏).

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞¬†`Thread`¬†-¬†`interrupt()`. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–ª–∞–≥-—Å—Ç–∞—Ç—É—Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç—Ç–æ–≥–æ —Ñ–ª–∞–≥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞¬†`isInterrupted()`¬†–∏–ª–∏¬†`Thread.interrupted()`¬†(–¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞). –ú–µ—Ç–æ–¥¬†`interrupt()`¬†—Ç–∞–∫–∂–µ —Å–ø–æ—Å–æ–±–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ –ø–æ—Ç–æ–∫ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–∂–∏–¥–∞–Ω–∏—è –∏–ª–∏ —Å–ø—è—á–∫–∏. –¢.–µ. –µ—Å–ª–∏ —É –ø–æ—Ç–æ–∫–∞ –±—ã–ª–∏ –≤—ã–∑–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã¬†`sleep()`¬†–∏–ª–∏¬†`wait()`¬†‚Äì —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–µ—Ä–≤–µ—Ç—Å—è –∏ –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ¬†`InterruptedException`. –§–ª–∞–≥ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è.

–°—Ö–µ–º–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–π:

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫.
- –í –ø–æ—Ç–æ–∫–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤¬†`isInterrupted()`.
- –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–ª–∞–≥–∞ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏–ª–∏ –±—ã–ª–æ –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è/—Å–ø—è—á–∫–∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ç–æ–∫ –ø—ã—Ç–∞—é—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑–≤–Ω–µ.
- –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ ‚Äì –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É (–µ—Å–ª–∏ –ø–æ –∫–∞–∫–∏–º-—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ) –∏–ª–∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–æ–º —Ä–µ—Å—É—Ä—Å—ã –∏ –∑–∞–∫–æ–Ω—á–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

–í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —ç—Ç–æ–º –ø–æ–¥—Ö–æ–¥–µ ‚Äì –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–º –≤–≤–æ–¥–µ-–≤—ã–≤–æ–¥–µ. –ï—Å–ª–∏ –ø–æ—Ç–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞ —á—Ç–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö - –≤—ã–∑–æ–≤¬†`interrupt()`¬†–∏–∑ —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –µ–≥–æ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç. –†–µ—à–µ–Ω–∏—è —Ç—É—Ç —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ —á—Ç–µ–Ω–∏–µ –∏–¥–µ—Ç –∏–∑ —Ñ–∞–π–ª–∞ ‚Äì –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫—Ä–∞–π–Ω–µ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–∞ –∏ —Ç–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –º–µ—Ç–æ–¥–∞¬†`read()`. –ï—Å–ª–∏ –∂–µ —á—Ç–µ–Ω–∏–µ –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º —Å–≤—è–∑–∞–Ω–æ —Å —Å–µ—Ç—å—é ‚Äì —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –≤–≤–æ–¥-–≤—ã–≤–æ–¥ –∏–∑ Java NIO.

–í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (–∞ —Ç–∞–∫–∂–µ –∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏) ‚Äì —Å–¥–µ–ª–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–æ–≥¬†`interrupt()`. –¢.–µ. –æ–±—ä—è–≤–∏—Ç—å –≤ –∫–ª–∞—Å—Å–µ –ø–æ—Ç–æ–∫–∞ —Ñ–ª–∞–≥–∏ ‚Äì –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫—É –∏/–∏–ª–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö –ø—É—Ç–µ–º –≤—ã–∑–æ–≤–∞ –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏–∑–≤–Ω–µ. –ú–µ—Ç–æ–¥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ —ç—Ç–æ–º –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–µ–π ‚Äì –ø—Ä–æ–≤–µ—Ä—è—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É —Ñ–ª–∞–≥–æ–≤ –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏ –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–∏. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞. –í–æ-–ø–µ—Ä–≤—ã—Ö, –ø–æ—Ç–æ–∫–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∂–∏–¥–∞–Ω–∏—è —Ç–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º –Ω–µ ¬´–æ–∂–∏–≤–∏—Ç—å¬ª. –í–æ-–≤—Ç–æ—Ä—ã—Ö, –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º —Å–æ–≤—Å–µ–º –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Ç–æ—Ä–æ–π –ø–æ—Ç–æ–∫ —Ç—É—Ç –∂–µ –µ–≥–æ —É–≤–∏–¥–∏—Ç. –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–µ—à –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —á–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —É –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ (—Ö–æ—Ç—è –¥–æ–ø—É—Å—Ç–∏–º—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –æ–±—ä—è–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é-—Ñ–ª–∞–≥ –∫–∞–∫¬†`volatile`).

###### –ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥¬†`Thread.stop()`?

–ü—Ä–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ (–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–µ) –ø–æ—Ç–æ–∫–∞,¬†`stop()`¬†–ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ –≤ –Ω–µ–¥–µ—Ç–µ—Ä–º–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –º–µ—Å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–º–∏ –µ–º—É —Ä–µ—Å—É—Ä—Å–∞–º–∏. –ü–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ - —á—Ç–æ –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–µ–ª–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –≤—ã—á–∏—Ç–∞–Ω—ã? –ì–¥–µ –≥–∞—Ä–∞–Ω—Ç–∏—è, —á—Ç–æ –ø–æ—Å–ª–µ –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–æ—Ç–æ–∫–∞ (–≤ —Å–ª—É—á–∞–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏) –æ–Ω —Å–º–æ–∂–µ—Ç –∏—Ö –¥–æ—á–∏—Ç–∞—Ç—å? –ï—Å–ª–∏ –ø–æ—Ç–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–π —Ä–µ—Å—É—Ä—Å, —Ç–æ –∫–∞–∫ —Å–Ω—è—Ç—å —ç—Ç—É –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏ –Ω–µ –ø–µ—Ä–µ–≤–µ–¥—ë—Ç –ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω—è—Ç–∏–µ –∫ –Ω–∞—Ä—É—à–µ–Ω–∏—é –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã? –¢–æ –∂–µ —Å–∞–º–æ–µ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∏ –Ω–∞ —Å–ª—É—á–∞–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö: –µ—Å–ª–∏ –ø–æ—Ç–æ–∫ –æ—Å—Ç–∞–Ω–æ–≤—è—Ç –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ç–æ –∫—Ç–æ –µ–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å? –ö—Ç–æ –∏ –∫–∞–∫ –±—É–¥–µ—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã?

###### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –≤ –ø–æ—Ç–æ–∫–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ?

- –ï—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø–æ–π–º–∞–Ω–æ ‚Äì –ø–æ—Ç–æ–∫ ¬´—É–º–∏—Ä–∞–µ—Ç¬ª (–ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç—è–Ω–∏–µ –º—ë—Ä—Ç–≤ (dead)).
- –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ–ø–æ–π–º–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π, —Ç–æ –æ–Ω –≤–æ–∑—å–º—ë—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ–±—è.¬†`Thread.UncaughtExceptionHandler`¬†‚Äì –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –∫–∞–∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥—Ä—É–≥–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –≤—ã–∑—ã–≤–∞–µ–º—ã—Ö, –∫–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ –≤–Ω–µ–∑–∞–ø–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –Ω–µ–ø–æ–π–º–∞–Ω–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–æ—Ç–æ–∫ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏–∑-–∑–∞ –Ω–µ–ø–æ–π–º–∞–Ω–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, JVM –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ¬†`UncaughtExceptionHandler`, –∏—Å–ø–æ–ª—å–∑—É—è¬†`Thread.getUncaughtExceptionHandler()`, –∏ –µ—Å–ª–∏ —Ç–∞–∫–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–π–¥–µ—Ç, —Ç–æ –≤—ã–∑–æ–≤–µ—Ç —É –Ω–µ–≥–æ –º–µ—Ç–æ–¥¬†`uncaughtException()`, –ø–µ—Ä–µ–¥–∞–≤ —ç—Ç–æ—Ç –ø–æ—Ç–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –≤–∏–¥–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
###### –ß—Ç–æ —Ç–∞–∫–æ–µ JMM (Java Memory Model) –∏ –ø—Ä–∏–Ω—Ü–∏–ø Happens-Before?

- An unlock action on monitor¬†`m`¬†_happens-before_¬†all subsequent lock actions on¬†`m`
- A write to a volatile variable¬†`v`¬†happens-before all subsequent reads of¬†`v`¬†by any thread
- The final action in a thread¬†`T1`¬†_happens-before_¬†any action in another thread¬†`T2`¬†that detects that¬†`T1`¬†has terminated.
- An action that starts a thread¬†_happens-before_¬†the first action in the thread it starts.
- If thread¬†`T1`¬†interrupts thread¬†`T2`, the interrupt by¬†`T1`¬†_happens-before_¬†any point where any other thread (including¬†`T2`) determines that¬†`T2`¬†has been interrupted (by having an¬†`InterruptedException`¬†thrown or by invoking¬†`Thread.interrupted`¬†or¬†`Thread.isInterrupted`).
- The write of the default value (`zero`,¬†`false`, or¬†`null`) to each variable¬†_happens-before_¬†the first action in every thread.

- –í —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –ª—é–±–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è happens-before –ª—é–±–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π, —Å–ª–µ–¥—É—é—â–µ–π –∑–∞ –Ω–µ–π –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ;
- –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∞ (unlock) happens-before –∑–∞—Ö–≤–∞—Ç —Ç–æ–≥–æ –∂–µ –º–æ–Ω–∏—Ç–æ—Ä–∞ (lock);
- –í—ã—Ö–æ–¥ –∏–∑¬†`synchronized`¬†–±–ª–æ–∫–∞/–º–µ—Ç–æ–¥–∞ happens-before –≤—Ö–æ–¥ –≤¬†`synchronized`¬†–±–ª–æ–∫/–º–µ—Ç–æ–¥ –Ω–∞ —Ç–æ–º –∂–µ –º–æ–Ω–∏—Ç–æ—Ä–µ;
- –ó–∞–ø–∏—Å—å¬†`volatile`¬†–ø–æ–ª—è happens-before —á—Ç–µ–Ω–∏–µ —Ç–æ–≥–æ –∂–µ —Å–∞–º–æ–≥–æ¬†`volatile`¬†–ø–æ–ª—è;
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞¬†`run()`¬†—ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞¬†`Thread`¬†happens-before –≤—ã—Ö–æ–¥ –∏–∑ –º–µ—Ç–æ–¥–∞¬†`join()`¬†–∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ¬†`false`¬†–º–µ—Ç–æ–¥–æ–º¬†`isAlive()`¬†—ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º —Ç–æ–≥–æ –∂–µ –ø–æ—Ç–æ–∫–∞;
- –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞¬†`start()`¬†—ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞¬†`Thread`¬†happens-before –Ω–∞—á–∞–ª–æ –º–µ—Ç–æ–¥–∞¬†`run()`¬†—ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ç–æ–≥–æ –∂–µ –ø–æ—Ç–æ–∫–∞;
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ happens-before –Ω–∞—á–∞–ª–æ –º–µ—Ç–æ–¥–∞¬†`finalize()`¬†—ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞;
- –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞¬†`interrupt()`¬†–Ω–∞ –ø–æ—Ç–æ–∫–µ happens-before –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—é –ø–æ—Ç–æ–∫–æ–º —Ñ–∞–∫—Ç–∞, —á—Ç–æ –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –±—ã–ª –≤—ã–∑–≤–∞–Ω –ª–∏–±–æ –ø—É—Ç–µ–º –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è¬†`InterruptedException`, –ª–∏–±–æ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤¬†`isInterrupted()`¬†–∏–ª–∏¬†`interrupted()`.
- –°–≤—è–∑—å happens-before —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω–∞, —Ç.–µ. –µ—Å–ª–∏¬†_X_¬†happens-before¬†_Y_, –∞¬†_Y_¬†happens-before¬†_Z_, —Ç–æ¬†_X_¬†happens-before¬†_Z_.
- –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ/–∑–∞—Ö–≤–∞—Ç –º–æ–Ω–∏—Ç–æ—Ä–∞ –∏ –∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ –≤¬†`volatile`¬†–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–≤—è–∑–∞–Ω—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º happens-before, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –Ω–∞–¥ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –æ–±—ä–µ–∫—Ç–∞.
- –í –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ happens-before —É—á–∞—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –¥–≤–∞ –ø–æ—Ç–æ–∫–∞, –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –Ω–∏—á–µ–≥–æ —Å–∫–∞–∑–∞—Ç—å –Ω–µ–ª—å–∑—è, –ø–æ–∫–∞ –≤ –∫–∞–∂–¥–æ–º –∏–∑ –Ω–∏—Ö –Ω–µ –Ω–∞—Å—Ç—É–ø–∏—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ happens-before —Å –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–æ–º.
###### –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –∞—Ç–æ–º–∏–∫–æ–≤ –∑–Ω–∞–µ—à—å?

| –º–µ—Ç–æ–¥                                                 | –æ–ø–∏—Å–∞–Ω–∏–µ                                                                                                         |
| ----------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| int addAndGet (int delta)                             | –î–æ–±–∞–≤–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫ —Ç–µ–∫—É—â–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.                                                             |
| boolean compareAndSet (–æ–∂–∏–¥–∞–µ–º–æ–µ int, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ int) | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º. |
| int decrementAndGet ()                                | –£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                                                           |
| int getAndAdd (int delta)                             | –î–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫ —Ç–µ–∫—É—â–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.                                                                   |
| int getAndDecrement ()                                | –£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                                                           |
| int getAndIncrement ()                                | –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                                                         |
| int getAndSet (int newValue)                          | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                                    |
| int incrementAndGet ()                                | –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                                                         |
| lazySet (int newValue)                                | –í –∫–æ–Ω—Ü–µ-–∫–æ–Ω—Ü–æ–≤ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                                             |
| boolean weakCompareAndSet (–æ–∂–∏–¥–∞–µ–º–æ–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ int) | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º. 
###### –ß—Ç–æ —Ç–∞–∫–æ–µ deadlock?

–ö–æ–≥–¥–∞ –¥–≤–∞ –∏ –±–æ–ª–µ–µ –ø–æ—Ç–æ–∫–æ–≤ –≤–µ—á–Ω–æ –æ–∂–∏–¥–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞. _Deadlock –∏–º–µ–µ—Ç –º–µ—Å—Ç–æ –±—ã—Ç—å, —Ç–æ–≥–¥–∞ –∏ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞ –•–æ–ª—Ç–∞, –æ—Ç—Ä–∞–∂–∞—é—â–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤,¬†**—Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–∏–∫–ª**._ –≠—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –¥–≤–∞ –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ—Ç–æ–∫–∞ –Ω–∞–≤—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –æ–∂–∏–¥–∞—è —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∑–∞—Ö–≤–∞—á–µ–Ω—ã –¥—Ä—É–≥–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ (**Thread A**¬†–æ–∂–∏–¥–∞–µ—Ç¬†**Thread B**, –∞¬†**Thread B**¬†–æ–∂–∏–¥–∞–µ—Ç¬†**Thread A**)

1. –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è: –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å –∑–∞–Ω—è—Ç –≤ —Ä–µ–∂–∏–º–µ –Ω–µ–¥–µ–ª–∏–º–æ—Å—Ç–∏ –∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å –≤ –ª—é–±–æ–π –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.
2. —É–¥–µ—Ä–∂–∞–Ω–∏—è –∏ –æ–∂–∏–¥–∞–Ω–∏—è: –ø–æ—Ç–æ–∫ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏.
3. –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø—Ä–µ–¥–æ—á–∏—Å—Ç–∫–∏: –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã: –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –∑–∞–Ω—è—Ç—ã, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–¥–∞–≤–∞—Ç—å—Å—è —É–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º –ø–æ—Ç–æ–∫–∞–º —Å—Ä–∞–∑—É –∂–µ.
4. —Ü–∏–∫–ª–∏—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è: –ø–æ—Ç–æ–∫ –∂–¥—ë—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞, –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –∂–¥—ë—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–≤—ã–º –ø–æ—Ç–æ–∫–æ–º.

–ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Å–ø–æ—Å–æ–± –∏–∑–±–µ–∂–∞—Ç—å –≤–∑–∞–∏–º–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ‚Äì –Ω–µ –¥–æ–ø—É—Å–∫–∞—Ç—å —Ü–∏–∫–ª–∏—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è. –≠—Ç–æ–≥–æ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∏—á—å, –ø–æ–ª—É—á–∞—è –º–æ–Ω–∏—Ç–æ—Ä—ã —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞—è –∏—Ö –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.

![](../../../_res/Pasted%20image%2020250317144115.png)

How to Prevent Deadlocks

1. **Lock Ordering**: Always acquire locks in the same order.
2. **Timeouts**: Instead of waiting indefinitely, use timeouts.
3. **Thread Management**: Regularly monitor and manage thread activity to detect potential deadlocks.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ livelock?

Livelock –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø–æ—Ç–æ–∫–∏ –≤–Ω–µ—à–Ω–µ –∫–∞–∫ –±—ã –∂–∏–≤—É—Ç, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –º–æ–≥—É—Ç –Ω–∏—á–µ–≥–æ —Å–¥–µ–ª–∞—Ç—å, —Ç.–∫. —É—Å–ª–æ–≤–∏–µ, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –æ–Ω–∏ –ø—ã—Ç–∞—é—Ç—Å—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–≤–æ—é —Ä–∞–±–æ—Ç—É, –Ω–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è. –ü–æ —Å—É—Ç–∏ Livelock –ø–æ—Ö–æ–∂ –Ω–∞ deadlock, –Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–∏ –Ω–µ "–∑–∞–≤–∏—Å–∞—é—Ç" –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–º –æ–∂–∏–¥–∞–Ω–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∞, –∞ —á—Ç–æ-—Ç–æ –≤–µ—á–Ω–æ –¥–µ–ª–∞—é—Ç.

–í—ã –¥–µ–ª–∞–µ—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫, –Ω–æ —á–µ–ª–æ–≤–µ–∫ –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ü–µ —Ç–æ–∂–µ –ø—ã—Ç–∞–µ—Ç—Å—è –≤–∞–º –ø–æ–∑–≤–æ–Ω–∏—Ç—å. –í—ã –æ–±–∞ –ø–æ–≤–µ—Å–∏—Ç–µ —Ç—Ä—É–±–∫—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤—Ä–µ–º—è, —á—Ç–æ —Å–Ω–æ–≤–∞ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–∫—É—é –∂–µ —Å–∏—Ç—É–∞—Ü–∏—é. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å—Å—è –≤–µ—á–Ω–æ—Å—Ç—å.

How to Avoid Livelock

1. **Use Random Backoff**: Introduce randomness in decision making, allowing for one thread to proceed while the other waits.
2. **Resource Fairness**: Implement algorithms that guarantee all threads will acquire resources eventually.
###### –ß—Ç–æ —Ç–∞–∫–æ–µ Starvation?

–û—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —ç—Ç–æ —è–≤–ª–µ–Ω–∏–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ –ø–æ—Ç–æ–∫–∏ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã, –∞ –∏–º –ø—Ä–æ—Å—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –≤—Å–µ—Ö. –ü–æ—ç—Ç–æ–º—É –ø–æ–∫–∞ –æ–¥–Ω–∏ –ø–æ—Ç–æ–∫–∏ –Ω–∞ —Å–µ–±—è –±–µ—Ä—É—Ç –≤—Å—ë –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –¥—Ä—É–≥–∏–µ –Ω–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è. Starvation ‚Äî —ç—Ç–æ –ª—é–±–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –µ–≥–æ —Ä–∞–±–æ—Ç—ã.

–£ –Ω–∞—Å –±—É–¥–µ—Ç –¥–≤–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞. –û–¥–∏–Ω –∂–∞–¥–Ω—ã–π(`greedyWorker`), –¥—Ä—É–≥–æ–π –≤–µ–∂–ª–∏–≤—ã–π(`politeWorker`). –û–±–æ–∏–º –¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª-–≤–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∏—Ö –ø–æ–ª–µ–∑–Ω—É—é —Ä–∞–±–æ—Ç—É ‚Äî —Å–ø–∞—Ç—å –ø–æ 3 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥–µ.

`greedyWorker`¬†–∂–∞–¥–Ω–æ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—â–∏–π —Ä–µ—Å—É—Ä—Å(`sharedLock`) –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–≥–æ —Ü–∏–∫–ª–∞ —Ä–∞–±–æ—Ç—ã, —Ç–æ–≥–¥–∞ –∫–∞–∫ politeWorker –ø—ã—Ç–∞–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

1. **Fair Scheduling**: Use synchronization mechanisms that ensure fair access to resources.
2. **Thread Prioritization**: Balance thread priority levels, avoiding scenarios where low-priority threads are completely overlooked.
3. **Resource Limits**: Establish limits for how long threads can hold resources.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ race condition?

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é –µ—Å—Ç—å —Ç–∞–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ, –∫–∞–∫ "—Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏". –≠—Ç–æ —è–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø–æ—Ç–æ–∫–∏ –¥–µ–ª—è—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π –Ω–µ–∫–æ—Ç–æ—Ä—ã–π —Ä–µ—Å—É—Ä—Å –∏ –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ.

–≠—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤. –í–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–º —Ä–µ—Å—É—Ä—Å–∞–º, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π –ø–æ—Ç–æ–∫ –ø–µ—Ä–≤—ã–º –≤—ã–ø–æ–ª–Ω–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

###### –ß—Ç–æ —Ç–∞–∫–æ–µ¬†_¬´—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ Fork/Join¬ª_?

–§—Ä–µ–π–º–≤–æ—Ä–∫ Fork/Join, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –≤ JDK 7, - —ç—Ç–æ –Ω–∞–±–æ—Ä –∫–ª–∞—Å—Å–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ø–æ–∑–≤–æ–ª—è—é—â–∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤. –û–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ä–µ—à–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

- –≠—Ç–∞–ø Fork: –±–æ–ª—å—à–∞—è –∑–∞–¥–∞—á–∞ —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ–Ω—å—à–∏—Ö –ø–æ–¥–∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–µ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Ç–∞–∫–∂–µ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ –º–µ–Ω—å—à–∏–µ. –ò —Ç–∞–∫ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∑–∞–¥–∞—á–∞ –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—Ä–∏–≤–∏–∞–ª—å–Ω–æ–π –∏ —Ä–µ—à–∞–µ–º–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.
- –≠—Ç–∞–ø Join: –¥–∞–ª–µ–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∏–¥—ë—Ç –ø—Ä–æ—Ü–µ—Å—Å ¬´—Å–≤—ë—Ä—Ç–∫–∏¬ª - —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–∑–∞–¥–∞—á –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –æ–±—Ä–∞–∑–æ–º –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ –≤—Å–µ–π –∑–∞–¥–∞—á–∏.

–†–µ—à–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–∑–∞–¥–∞—á (–≤ —Ç.—á. –∏ —Å–∞–º–æ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

> –î–ª—è —Ä–µ—à–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–¥–∞—á —ç—Ç–∞–ø Join –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ QuickSort ‚Äî –º–∞—Å—Å–∏–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –≤—Å—ë –º–µ–Ω—å—à–∏–µ –∏ –º–µ–Ω—å—à–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã, –ø–æ–∫–∞ –Ω–µ –≤—ã—Ä–æ–∂–¥–∞–µ—Ç—Å—è –≤ —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π –∏–∑ 1 —ç–ª–µ–º–µ–Ω—Ç–∞. –•–æ—Ç—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–º —Å–º—ã—Å–ª–µ Join –±—É–¥–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º –∏ —Ç—É—Ç, —Ç.–∫. –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–∫–∞ –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–∑–∞–¥–∞—á.

–ï—â—ë –æ–¥–Ω–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ —ç—Ç–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç work-stealing –∞–ª–≥–æ—Ä–∏—Ç–º: –ø–æ—Ç–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–¥–∑–∞–¥–∞—á, –º–æ–≥—É—Ç ¬´—É–∫—Ä–∞—Å—Ç—å¬ª –ø–æ–¥–∑–∞–¥–∞—á–∏ —É –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—ë –µ—â—ë –∑–∞–Ω—è—Ç—ã.
### QA Middle
###### –ß—Ç–æ —Ç–∞–∫–æ–µ CountDownLatch

Wait –Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö. –ú—ã –º–æ–∂–µ–º –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–∞—É–∑—É —Ä–∞–±–æ—Ç—É –∫–∞–∫–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –ø–æ—Ç–æ–∫–∏, —Å–∫–æ–ª—å–∫–æ –º—ã —É–∫–∞–∑–∞–ª–∏ –≤ CountDownLatch

###### CyclicBarrier

–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω–µ–¥—Ä–∏—Ç—å wait –≤ Runnable, –∫ –ø—Ä–∏–º–µ—Ä—É –º—ã –º–æ–∂–µ–º –æ–∂–∏–¥–∞—Ç—å –ø–æ–∫–∞ 3 –ø–æ—Ç–æ–∫–∞ –¥–æ–π–¥—É—Ç –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞, –∑–∞—Ç–µ–º –ø—É—Å–∫–∞—Ç—å –∏—Ö –¥–∞–ª—å—à–µ. 

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç —á–∞—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –∑–∞–≤–µ—Ä—à–∞—Ç —Å–≤–æ–∏ —ç—Ç–∞–ø—ã, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

###### –ß—Ç–æ —Ç–∞–∫–æ–µ Semapthor

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–∫–æ–º—É-—Ç–æ —Ä–µ—Å—É—Ä—Å—É.

```java
semaphore.acquire();
```

###### –ß—Ç–æ —Ç–∞–∫–æ–µ Exchanger

–ï—Å–ª–∏ –¥–≤—É–º –ø–æ—Ç–æ–∫–∞–º –Ω—É–∂–Ω–æ –æ–±–º–µ–Ω—è—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏

###### –ß—Ç–æ —Ç–∞–∫–æ–µ Phaser?

–ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π –±–∞—Ä—å–µ—Ä —á–µ–º CyclycBarier - –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –±–∞—Ä—å–µ—Ä –ø–æ —Ñ–∞–∑–∞–º, –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∫–æ–ª-–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±–∞—Ä—å–µ—Ä–∞.

###### –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ, –∏ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –ø–æ–¥—Ö–æ–¥?


###### –í —á–µ–º –∑–∞–∫–ª—é—á–∞—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É¬†`CyclicBarrier`¬†–∏¬†`CountDownLatch`?

`CountDownLatch`¬†(–∑–∞–º–æ–∫ —Å –æ–±—Ä–∞—Ç–Ω—ã–º –æ—Ç—Å—á–µ—Ç–æ–º) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª—é–±–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ—Ç–æ–∫–æ–≤ –≤ –±–ª–æ–∫–µ –∫–æ–¥–∞ –æ–∂–∏–¥–∞—Ç—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π, –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö—Å—è –≤ –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö, –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –æ–Ω–∏ –±—É–¥—É—Ç ¬´–æ—Ç–ø—É—â–µ–Ω—ã¬ª, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–≤–æ—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä¬†`CountDownLatch(int count)`¬†–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, —á—Ç–æ–±—ã –∑–∞–º–æ–∫ ¬´–æ—Ç–ø—É—Å—Ç–∏–ª¬ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–∏.

> –ü—Ä–∏–º–µ—Ä–æ–º¬†`CountDownLatch`¬†–∏–∑ –∂–∏–∑–Ω–∏ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å —Å–±–æ—Ä —ç–∫—Å–∫—É—Ä—Å–∏–æ–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã: –ø–æ–∫–∞ –Ω–µ –Ω–∞–±–µ—Ä–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫, —ç–∫—Å–∫—É—Ä—Å–∏—è –Ω–µ –Ω–∞—á–Ω–µ—Ç—Å—è.

`CyclicBarrier`¬†—Ä–µ–∞–ª–∏–∑—É–µ—Ç —à–∞–±–ª–æ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ¬´–ë–∞—Ä—å–µ—Ä¬ª. –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –±–∞—Ä—å–µ—Ä —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –ø—Ä–∏–±—ã–ª–∏, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–∏–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –±–∞—Ä—å–µ—Ä –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –Ω–µ–≥–æ), –∏, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –±–∞—Ä—å–µ—Ä –ª–æ–º–∞–µ—Ç—Å—è –∏ –æ–∂–∏–¥–∞—é—â–∏–µ –ø–æ—Ç–æ–∫–∏ ¬´–æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è¬ª. –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –±–∞—Ä—å–µ—Ä–∞¬†`CyclicBarrier(int parties)`¬†–∏¬†`CyclicBarrier(int parties, Runnable barrierAction)`¬†–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ—Ä–æ–Ω, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã ¬´–≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è¬ª, –∏, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏, –∫–æ–≥–¥–∞ —Å—Ç–æ—Ä–æ–Ω—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å, –Ω–æ –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–æ–≥–¥–∞ –æ–Ω–∏ –±—É–¥—É—Ç ¬´–æ—Ç–ø—É—â–µ–Ω—ã¬ª.

> `CyclicBarrier`¬†—è–≤–ª—è–µ—Ç—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –º–µ—Ç–æ–¥–∞¬†`join()`, –∫–æ—Ç–æ—Ä—ã–π ¬´—Å–æ–±–∏—Ä–∞–µ—Ç¬ª –ø–æ—Ç–æ–∫–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å.

`CyclicBarrier`¬†–ø–æ—Ö–æ–∂ –Ω–∞¬†`CountDownLatch`, –Ω–æ –≥–ª–∞–≤–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏ –≤ —Ç–æ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ¬´–∑–∞–º–æ–∫¬ª –º–æ–∂–Ω–æ –ª–∏—à—å –µ–¥–∏–Ω–æ–∂–¥—ã - –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –µ–≥–æ —Å—á—ë—Ç—á–∏–∫ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –Ω—É–ª—è, –∞ ¬´–±–∞—Ä—å–µ—Ä¬ª –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ, –¥–∞–∂–µ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω ¬´—Å–ª–æ–º–∞–µ—Ç—Å—è¬ª.

###### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–º–ø –ø–æ—Ç–æ–∫–∞?

–°—Ä–µ–¥—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è Java –Ω–∞ –æ—Å–Ω–æ–≤–µ HotSpot –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Ç–æ–ª—å–∫–æ –¥–∞–º–ø –≤ —Ñ–æ—Ä–º–∞—Ç–µ HPROF. –í —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–º–µ–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–º–ø–æ–≤ –∏ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–º–ø–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π.

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ¬†Ctrl+Break: –µ—Å–ª–∏ –¥–ª—è –∏—Å–ø–æ–ª–Ω—è—é—â–µ–≥–æ—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –æ–ø—Ü–∏—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏¬†`-XX:+HeapDumpOnCtrlBreak`, —Ç–æ –¥–∞–º–ø —Ñ–æ—Ä–º–∞—Ç–∞ HPROF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –¥–∞–º–ø–æ–º –ø–æ—Ç–æ–∫–∞ –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è¬†`Ctrl+Break`¬†–∏–ª–∏¬†`SIGQUIT`¬†(–æ–±—ã—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é¬†_kill -3_), –∫–æ—Ç–æ—Ä–æ–µ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–æ–Ω—Å–æ–ª–∏. –≠—Ç–∞ –æ–ø—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –æ–ø—Ü–∏—é:¬†`-Xrunhprof:format=b,file=heapdump.hprof`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞¬†_jmap_: —É—Ç–∏–ª–∏—Ç–∞¬†_jmap_, –ø–æ—Å—Ç–∞–≤–ª—è–µ–º–∞—è –≤ —Å–æ—Å—Ç–∞–≤–µ –∫–∞—Ç–∞–ª–æ–≥–∞¬†`/bin/`¬†–∫–æ–º–ø–ª–µ–∫—Ç–∞ JDK, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–º–ø HPROF –∏–∑ –∏—Å–ø–æ–ª–Ω—è—é—â–µ–≥–æ—Å—è –ø—Ä–æ—Ü–µ—Å—Å–∞.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã: –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —è–¥—Ä–∞ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ—Ä–∞–∑—Ä—É—à–∞—é—â–µ–π –∫–æ–º–∞–Ω–¥–æ–π¬†_gcore_¬†–∏–ª–∏ —Ä–∞–∑—Ä—É—à–∞—é—â–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏¬†_kill -6_¬†–∏–ª–∏¬†_kill -11_. –ó–∞—Ç–µ–º –∏–∑–≤–ª–µ—á—å –¥–∞–º–ø –∫—É—á–∏ –∏–∑ —Ñ–∞–π–ª–∞ —è–¥—Ä–∞ —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã¬†_jmap_.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞¬†_JConsole_. –û–ø–µ—Ä–∞—Ü–∏—è¬†`dumpHeap`¬†–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤¬†_JConsole_¬†–∫–∞–∫ MBean-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç¬†`HotSpotDiagnostic`. –≠—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–∞–º–ø–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ HPROF.

–ú–µ—Ç–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π:

- –°–æ–±—ã—Ç–∏–µ¬†`OutOfMemoryError`: –ï—Å–ª–∏ –¥–ª—è –∏—Å–ø–æ–ª–Ω—è—é—â–µ–≥–æ—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –æ–ø—Ü–∏—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏¬†`-XX:+HeapDumpOnOutOfMemoryError`, —Ç–æ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏¬†`OutOfMemoryError`¬†–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–∞–º–ø —Ñ–æ—Ä–º–∞—Ç–∞ HPROF. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è ¬´production¬ª —Å–∏—Å—Ç–µ–º, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –ø–∞–º—è—Ç–∏ –∏ –Ω–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í —Å—Ç–∞—Ä—ã—Ö –≤—ã–ø—É—Å–∫–∞—Ö —Å—Ä–µ–¥ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è Java –Ω–∞ –±–∞–∑–µ HotSpot –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–º–ø–æ–≤ –∫—É—á–∏ –≤ –ø–µ—Ä–µ—Å—á–µ—Ç–µ –Ω–∞ –æ–¥–Ω—É JVM; –≤ –±–æ–ª–µ–µ –Ω–æ–≤—ã—Ö –≤—ã–ø—É—Å–∫–∞—Ö –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–µ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ –¥–∞–º–ø–∞ –∫—É—á–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ JVM.
###### –ß—Ç–æ —Ç–∞–∫–æ–µ¬†_double checked locking Singleton_?

**double checked locking Singleton**¬†- —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Ä–µ–∞–ª–∏–∑—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω –û–¥–∏–Ω–æ—á–∫–∞. –î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–ª–æ–∫–∏—Ä—É—è—Å—å —Ç–æ–ª—å–∫–æ —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–¥–∏–Ω–æ—á–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤–ø–µ—Ä–≤—ã–µ.

```java
class DoubleCheckedLockingSingleton {
    private static volatile DoubleCheckedLockingSingleton instance;

    static DoubleCheckedLockingSingleton getInstance() {
        DoubleCheckedLockingSingleton current = instance;
        if (current == null) {
            synchronized (DoubleCheckedLockingSingleton.class) {
                current = instance;

                if (current == null) {
                    instance = current = new DoubleCheckedLockingSingleton();
                }
            }
        }
        return current;
    }
}
```

–°–ª–µ–¥—É–µ—Ç –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ¬†`volatile`¬†–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ü—Ä–æ–±–ª–µ–º–∞ Double Checked Lock –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –º–æ–¥–µ–ª–∏ –ø–∞–º—è—Ç–∏ Java, —Ç–æ—á–Ω–µ–µ –≤ –ø–æ—Ä—è–¥–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è, —á—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–µ –Ω—É–ª–µ–≤–æ–π) –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç. –•–æ—Ç—è —ç—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–∞ –≤ JDK 1.5, –æ–¥–Ω–∞–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†`volatile`¬†–¥–ª—è Double Che—Åked Lock –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å–∏–ª–µ.

###### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π Singleton?

- **Static field**

```java
public class Singleton {
	public static final Singleton INSTANCE = new Singleton();
}
```

- **Enum**

```java
public enum Singleton {
	INSTANCE;
}
```

- **Synchronized Accessor**

```java
public class Singleton {
	private static Singleton instance;
	
	public static synchronized Singleton getInstance() {
		if (instance == null) {
			instance = new Singleton();
		}
		return instance;
	}
}
```

- **Double Checked Locking &¬†`volatile`**

```java
public class Singleton {
        private static volatile Singleton instance;
	
        public static Singleton getInstance() {
		Singleton localInstance = instance;
		if (localInstance == null) {
			synchronized (Singleton.class) {
				localInstance = instance;
				if (localInstance == null) {
					instance = localInstance = new Singleton();
				}
			}
		}
		return localInstance;
	}
}
```

- **On Demand Holder Idiom**

```java
public class Singleton {
		
	public static class SingletonHolder {
		public static final Singleton HOLDER_INSTANCE = new Singleton();
	}
		
	public static Singleton getInstance() {
		return SingletonHolder.HOLDER_INSTANCE;
	}
}
```

###### –ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –∫–æ—Ç–æ—Ä—ã–º –≤—ã —Å–ª–µ–¥—É–µ—Ç–µ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?

–ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç–æ–π–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —É–¥–æ–±–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π –∏ –ø—Ä–æ—Å—Ç–æ—Ç–æ–π –¥–∞–ª—å–Ω–µ–π—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–¥–∞.

- –í—Å–µ–≥–¥–∞ –¥–∞–≤–∞–π—Ç–µ –∑–Ω–∞—á–∏–º—ã–µ –∏–º–µ–Ω–∞ —Å–≤–æ–∏–º –ø–æ—Ç–æ–∫–∞–º. –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–ª–∞–¥–∫–∏, –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏–ª–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –∫–æ–¥–µ ‚Äì –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞.¬†`OrderProcessor`,¬†`QuoteProcessor`¬†–∏–ª–∏¬†`TradeProcessor`¬†–Ω–∞–º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ–µ, —á–µ–º¬†`Thread1`,¬†`Thread2`¬†–∏¬†`Thread3`. –ò–º—è –¥–æ–ª–∂–Ω–æ –æ—Ç—Ä–∞–∂–∞—Ç—å –∑–∞–¥–∞—á—É, –≤—ã–ø–æ–ª–Ω—è–µ–º—É—é –¥–∞–Ω–Ω—ã–º –ø–æ—Ç–æ–∫–æ–º.
- –ò–∑–±–µ–≥–∞–π—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏–ª–∏ —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å —É–º–µ–Ω—å—à–∏—Ç—å –º–∞—Å—à—Ç–∞–±—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞—Ç—Ä–∞—Ç–Ω–∞, –∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –µ—â—ë –±–æ–ª–µ–µ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–æ. –ü—ã—Ç–∞–π—Ç–µ—Å—å –∏–∑–±–µ–≥–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –∏ –æ—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é —Å–µ–∫—Ü–∏—é –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–º –æ–±—ä—ë–º–µ. –ü–æ—ç—Ç–æ–º—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–µ–ª—å–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–¥–µ–ª—è—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –º–∞—Å—à—Ç–∞–±–æ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ —Å –æ—Å–æ–±–æ–π —Ç—â–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é. –ù–µ—Ç –Ω–∏—á–µ–≥–æ —Ö—É–∂–µ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞ –∏–ª–∏ —Å–∏—Å—Ç–µ–º—ã –≤ –Ω–µ–∫–æ–Ω—Å—Ç–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º, –ø–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
- –ü–æ–º–Ω–∏—Ç–µ –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. –í—ã–±—Ä–æ—à–µ–Ω–Ω—ã–µ¬†`InterruptedException`¬†–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–¥–µ–∫–≤–∞—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∞–≤–ª–µ–Ω—ã. –¢–∞–∫ –∂–µ –Ω–µ —Å—Ç–æ–∏—Ç –ø—Ä–µ–Ω–µ–±—Ä–µ–≥–∞—Ç—å¬†`Thread.UncaughtExceptionHandler`. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –æ–Ω –∑–∞—á–∞—Å—Ç—É—é –ø—Ä–æ—Å—Ç–æ ¬´–ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞–µ—Ç¬ª –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –¢–∞–∫, –µ—Å–ª–∏ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ¬†`Runnable`¬†–Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤–Ω—É—Ç—Ä—å –±–ª–æ–∫–∞¬†`try-catch`. –ï—Å–ª–∏ –≤ –æ—á–µ—Ä–µ–¥—å –ø—É–ª–∞ –ø–æ–º–µ—â–∞–µ—Ç—Å—è¬†`Callable`, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏—Ç—Å—è, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –∏–∑—ã–º–∞–µ—Ç—Å—è –ø–æ–º–æ—â—å—é –±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ¬†`get()`, —á—Ç–æ–±—ã –≤ —Å–ª—É—á–∞–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–Ω–æ–≤–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.
- –ú–µ–∂–¥—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏ –∏¬†`wait()`¬†–∏¬†`notify()`¬†—Å–ª–µ–¥—É–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã. –í–æ-–ø–µ—Ä–≤—ã—Ö, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã, —Ç–∏–ø–∞¬†`CountDownLatch`,¬†`Semaphore`,¬†`CyclicBarrier`¬†–∏–ª–∏¬†`Exchanger`¬†—É–ø—Ä–æ—â–∞—é—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞. –û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø–æ—Ç–æ–∫, –∏—Å–ø–æ–ª—å–∑—É—è¬†`wait()`¬†–∏¬†`notify()`. –í–æ-–≤—Ç–æ—Ä—ã—Ö, —ç—Ç–∏ –∫–ª–∞—Å—Å—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ –º–∞—Å—Ç–µ—Ä–∞–º–∏ —Å–≤–æ–µ–≥–æ –¥–µ–ª–∞ –∏ –µ—Å—Ç—å —à–∞–Ω—Å, —á—Ç–æ –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö JDK –æ–Ω–∏ –±—É–¥—É—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏–∑–Ω—É—Ç—Ä–∏ –∏–ª–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –±–æ–ª–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π –≤–Ω–µ—à–Ω–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π.
- –ü–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Concurrent —Åollection –≤—ã–≥–æ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Synchronized —Åollection, —Ç.–∫. –ø–µ—Ä–≤—ã–µ –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –∏—Ö –Ω–∞–ø–∏—Å–∞–Ω–∏—è –Ω–æ–≤—à–µ—Å—Ç–≤–∞ —è–∑—ã–∫–∞) –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã, —á–µ–º –∏—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏.
### QA Senior

###### @Async


###### –ê –µ—Å–ª–∏ volatile –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ Long - –æ–Ω —Å—Ç–∞–Ω–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–º?



###### –í —á–µ–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–∏—Ä—É—Ç–∞–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤?


###### NIO - —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –¥–ª—è —á–µ–≥–æ –æ–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞?



###### –ö–∞–∫ –≤ –ø–ª–∞–Ω–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–Ω—è—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –∏–Ω–¥–µ–∫—Å?


###### –ü—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏ –±–¥?


###### –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ volatile –∏ synchronized?


###### –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É ConcurrentHashMap –∏ SynchronizedHashMap?

###### ConcurrentSkipListMap vs ConcurrentHashMap?
## Resources

- [JDK concurrent package](https://habr.com/ru/articles/187854/)
- [Deadlocks, Livelocks –∏ Starvation](https://ubiklab.net/posts/deadlocks-livelocks-starvation/)
- [Understanding Deadlock, Livelock, and Starvation in Java Concurrency](https://procodebase.com/article/understanding-deadlock-livelock-and-starvation-in-java-concurrency)
- [Difference Between CompletableFuture And Future In Java](https://www.hungrycoders.com/blog/difference-between-completablefuture-and-future-in-java)
- [–•–∞–±—Ä–∞—Ö–∞–±—Ä - –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –≤ Java](https://habrahabr.ru/post/164487/)
- [IBM DeveloperWorks - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ](https://www.ibm.com/developerworks/ru/library/l-java_universe_multithreading_tasks/)
- [–ó–∞–ø–∏—Å–∫–∏ —Ç—Ä–µ–∑–≤–æ–≥–æ –ø—Ä–∞–∫—Ç–∏–∫–∞](http://www.skipy.ru/technics/synchronization.html)
- [IBM DeveloperWorks - SCJP](https://www.ibm.com/developerworks/ru/edu/j-scjp/section8.html)
- [JavaRush](http://info.javarush.ru/KapChook/2015/02/15/%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4-%D0%A2%D0%BE%D0%BF-50-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D1%8C%D1%8E-%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2-%D0%BF%D0%BE-%D0%BD%D0%B8%D1%82%D1%8F%D0%BC-%D0%A7%D0%B0%D1%81%D1%82%D1%8C-1-.html)
- [–•–∞–±—Ä–∞—Ö–∞–±—Ä - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞–º¬†`java.util.concurrent.*`](https://habrahabr.ru/post/277669/)
- [–ë–ª–æ–≥ —Å—É—Ä–æ–≤–æ–≥–æ —á–µ–ª—è–±–∏–Ω—Å–∫–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞](http://samolisov.blogspot.ru/2011/04/threadlocal.html)
- [IBM DeveloperWorks - –ë–æ–ª–µ–µ –≥–∏–±–∫–∞—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤ JDK 5.0](http://www.ibm.com/developerworks/ru/library/j-jtp10264/)
- [–•–∞–±—Ä–∞—Ö–∞–±—Ä - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Singleton –≤ Java](https://habrahabr.ru/post/129494/)
- [duct-tape-architect.ru](http://www.duct-tape-architect.ru/?p=294#3__171_187___Java_HotSpot_JVM6)