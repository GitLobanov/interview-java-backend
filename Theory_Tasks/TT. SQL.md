## QA

###### На счету пользователя 1000 р. Первая транзакция: читает 1000 на счету, пытается снять 1000. Вторая транзакция тоже читает 1000, хочет снять еще 500 р. Что будет, изоляция выставлена READ COMMITED? Как обойти ситуацию? Если хотим решить ситуацию, но оставить уровень транзакции READ COMMITED?

- SELECT FOR UPDATE

###### На уровне Repeatable Read или Serializable транзакция начинает обновлять запись, но сама транзакция еще не завершается. Могут ли две транзакции друг друга заблокировать? Как называется, как с ней быть? - deadlock
    
###### По бизнес-логике нужно часто делать запросы по точному совпадению фамилии доставать пользователей. Ты хочешь повесить индекс на это поле для повышения перформанса. Какой тип индекса лучше подойдет? - А хеш-индекс подойдет? - Если поле не фамилия, а номер счета, но не primary key? - Если поле updated_at timestamp, хочу посмотреть все данные, которые были обновлены за последний час, либо за вчерашний день, какой индекс лучше подойдет? - BTree, потому что отсортированное дерево
    
###### Таблица уже в проде, приложение тоже, очень много данных, почти ТБайты, активное использование. Как повесить индексы на таблицу, но не блокировать доступ к таблице, не останавливать прод?
    
###### Как резделять данные по шардам, если есть 4 инстанса, мы берем данные из uuid. А потом захотим добавить 5 инстанс, придется переложить заново? - Альтернатива координатору для распределения по шардам (если координатор упадет, потеряем данные ко всему)
    
###### Сервис в рамках транзакции сохранил в БД и должен еще записать в Kafka, но отключили свет. Как предусмотреть, что в БД закомичены данные, которые не дошли до конца?

###### 2 таблицы: данные сотрудника и отделы. Хотим получить данные сотрудника и название отдела. Какой JOIN использовать?

###### Есть таблица, 2 поля: айди и количество лайков. Как бы ты сделал увеличение счетчиков лайков на 1?

###### Есть таблицы: Authors(id int PK, name text), Books(id int PK, title text). Как сделать на уровне БД так, чтобы у авторов могло быть много книг, и у книги много авторов? 

- сделать третью таблицу и связь многие-ко-многим

######  Какой-то запрос читает данные, в это время другой изменяет данные в бд. Какие данные нам прийдут?

###### Таблица в ней сто миллионов в записей. Есть поле Х и нужно достать значения где X больше 100

###### Есть таблица, 3 поля: id, name, sex. Заполнили пользователями. Сделали индекс на имя и индекс на пол. Делаем запрос: SELECT * FROM table WHERE sex=‘w’; Как предположить или посмотреть, какие индексы будут использоваться в этом запросе?
    
###### У нас 2 БД. Один сервер у нас, другой сервер в Латинской Америке. Пользователи обновляют одну БД, вторая БД должна обновиться сложным путем. При этом запрашиваем одновременно данные из обеих БД. Что может быть не так?
    
###### Есть 2 таблицы по 5 строк в каждой. Я делаю запрос в LEFT JOIN. В результате выборки данных от скольки до скольки может получиться строк?


###### Есть 2 таблицы: сотрудники, отделы. В одном отделе много сотрудников. Выбрать все id отделов, где сотрудников больше 10

###### Создали индекс на поле, делаем запрос на это поле, а индексы не сработали. Может быть так?

