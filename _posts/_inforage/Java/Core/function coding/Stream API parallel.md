Стрим можно распараллелить с помощью parallel() или изначально создать параллельный стрим через parallelStream().

Оба этих метода просто ставят флаг параллельности.

Все сводится к тому, что стрим будет делиться на части, которые будут выполняться параллельно.

По дефолту параллельные стримы выполняются в ForkJoinPool.commonPool().

Параллельные стримы подходят только для ассоциативных операций без состояния.

Сделать параллельный стрим последовательным можно через sequential()

Всегда стоит подходить к параллельным стримам аккуратно, потому что:  

Чем больше данных, тем сложнее их сначала разделять, потом соединять  

Сложные структуры сложно параллелить. Так например распараллеливание LinkedList сильно сложнее чем ArrayList.  

forEach в параллельном режиме не гарантирует порядка, поэтому нужно использовать forEachOrdered

```java
phones.parallelStream()
    .sorted()
    .forEachOrdered(s->System.out.println(s));
```

Сохранение порядка в параллельных потоках увеличивает издержки при выполнении. Но если нам порядок не важен, то мы можем отключить его сохранение и тем самым увеличить производительность, использовав метод unordered:

```java
phones.parallelStream()
    .sorted()
    .unordered()
    .forEach(s->System.out.println(s));
```

![[../../../../_res/Pasted image 20240829195316.png]]