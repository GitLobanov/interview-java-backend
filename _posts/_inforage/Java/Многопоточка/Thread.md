### 1. **Создание и запуск потока**

Класс `Thread` используется для создания и управления потоками выполнения в Java.

Thread можно создать двумя способами:
    
1. **Наследование от класса Thread:

```java
        
class MyThread extends Thread {
    public void run() {
        // Код, выполняемый в потоке
    }
}

MyThread t = new MyThread();
t.start();  // Запуск потока

```

2. Реализация Runnable
        
```java
class MyRunnable implements Runnable {
    public void run() {
        // Код, выполняемый в потоке
    }
}

Thread t = new Thread(new MyRunnable());
t.start();  // Запуск потока
    
```
        
- Метод `start()` создаёт новый поток и вызывает метод `run()`.

### 2. **Метод `run()`**

Метод `run()` содержит код, который будет выполняться в потоке. Его не следует вызывать напрямую, поскольку это просто вызовет метод в текущем потоке.

Чтобы запустить поток, необходимо использовать метод `start()`, который в свою очередь вызывает `run()` в новом потоке.

[[Thread run vs start]]
### 3. Жизненный цикл потока

- Поток проходит несколько состояний: **NEW**, **RUNNABLE**, **BLOCKED**, **WAITING**, **TIMED_WAITING** и **TERMINATED**.
- Метод `start()` переводит поток из состояния NEW в RUNNABLE, после чего поток может быть выполнен.

![](../../../_res/Pasted%20image%2020250109142525.png)


### 4. **Методы управления потоками**

- `join()`: Ожидает завершения потока.
- `sleep(long millis)`: Приостанавливает выполнение потока на указанный промежуток времени.
- `interrupt()`: Прерывает поток, что может вызвать исключение `InterruptedException` в потоке, если он находится в состоянии ожидания или сна.
- `isAlive()`: Проверяет, активен ли поток.

### 5. **Приоритеты потоков**

- Потоки могут иметь приоритеты, определённые целыми числами от `Thread.MIN_PRIORITY` (1) до `Thread.MAX_PRIORITY` (10).
- Метод `setPriority(int priority)` используется для установки приоритета.
- Потоки с более высоким приоритетом получают большее внимание от планировщика потоков, но приоритет не гарантирует порядок выполнения.

### 6. **Демон-потоки (Daemon Threads)**

- Демон-потоки работают в фоновом режиме и автоматически завершаются при завершении всех пользовательских потоков.
- Метод `setDaemon(true)` делает поток демоном. Это должно быть выполнено до вызова `start()`.

### 7. **Синхронизация потоков**

- Для предотвращения гонок данных и обеспечения корректного доступа к общим ресурсам, необходимо использовать синхронизацию.
- Блоки кода, помеченные ключевым словом `synchronized`, могут быть выполнены только одним потоком одновременно.

[[Race Condition]]
### 8. **Основные ошибки при работе с потоками**

- **Неправильное использование метода `start()`**: <mark style="background: #FF5582A6;">Поток нельзя запустить дважды.</mark>
- **Вызов `run()` вместо `start()`**: Приводит к выполнению метода `run()` в текущем потоке, а не в новом.
- **Отсутствие синхронизации**: Может привести к несогласованному состоянию данных при одновременном доступе из нескольких потоков, т.е. [[Race Condition]]

### 9. **Совместимость с `Executors`**

- В современных приложениях чаще используют фреймворк `Executor`, который предоставляет более высокий уровень абстракции для работы с потоками, упрощая их создание и управление.

### 10. **Прекращение потока**

- Поток завершает своё выполнение, когда метод `run()` заканчивает свою работу.
- Метод `stop()` больше не рекомендуется к использованию, так как он может привести к непредсказуемому состоянию программы.