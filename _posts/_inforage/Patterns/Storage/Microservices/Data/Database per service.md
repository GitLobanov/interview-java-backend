- Каждый сервис имеет свою базу (база может быть общая, но тогда у каждого сервиса будет своя схема в базе)

Основная рекомендация при переходе на микросервисы — предоставить каждому сервису собственное хранилище данных, чтобы не было сильных зависимостей на уровне данных. При этом имеется в виду именно логическое разделение данных, то есть микросервисы могут совместно использовать одну и ту же физическую базу данных, но в ней они должны взаимодействовать с отдельной схемой, коллекцией или таблицей.

Основанный на этих принципах паттерн Database Per Service повышает автономность микросервисов и уменьшает связь между командами, разрабатывающими отдельные сервисы.

У паттерна есть и недостатки: усложняется обмен данными между сервисами и предоставление транзакционных гарантий ACID. Паттерн не стоит применять в небольших приложениях — он предназначен для крупномасштабных проектов с большим числом микросервисов, где каждой команде требуется полное владение ресурсами для повышения скорости разработки и лучшего масштабирования.

- Плюсы:
	- повышается автономность сервисов
	- каждый сервис может использовать свой тип БД
- Минусы:
	- сложно поддерживать гарантии ACID
	- сложнее обмениваться информацией между сервисами

![[../../../../../_res/Pasted image 20241107075756.png]]

Паттерну Database Per Service часто противопоставляют другой шаблон — [[Shared database]] («Разделяемая база данных»). По сути, он представляет собой антипаттерн и подразумевает использование одного хранилища данных несколькими микросервисами. Его допускается использовать на начальных стадиях миграции на микросервисную архитектуру или в очень небольших приложениях, разрабатываемых одной командой (2–3 микросервиса).