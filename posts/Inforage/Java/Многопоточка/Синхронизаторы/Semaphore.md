![[Pasted image 20241007123902.png]]

### Определение

Синхронизатор Semaphore реализует шаблон синхронизации Семафор. Чаще всего, семафоры необходимы, когда нужно ограничить доступ к некоторому общему ресурсу. В конструктор этого класса (Semaphore(int permits) или Semaphore(int permits, boolean fair)) обязательно передается количество потоков, которому семафор будет разрешать одновременно использовать заданный ресурс.

### Пример

#### Алиса и semaphore. Да уж...

Semaphore управляет доступом к ресурсам с помощью "счётчика разрешений", что напоминает поведение двери, через которую можно проходить только определённое количество людей одновременно. Похожая ситуация встречается в сказке "Алиса в Стране Чудес", когда герои могут проходить через узкие ворота по очереди — что схоже с логикой семафора.
### Дополнительно

`Semaphore` — это синхронизатор, который управляет доступом к ресурсу с помощью счётчика разрешений (`permits`). Счётчик определяет, сколько потоков могут одновременно получить доступ к общему ресурсу. В отличие от мьютекса (бинарного семафора), который ограничивает доступ только одному потоку, `Semaphore` позволяет контролировать доступ для нескольких потоков.

**`Semaphore(int permits)`**: Создаёт семафор с указанным числом разрешений. Семафор управляет доступом к ресурсу с использованием этого счётчика.
    
**`void acquire()`**: Запрашивает разрешение на доступ. Если счётчик больше нуля, он уменьшается на единицу, и поток получает доступ. Если счётчик равен нулю, поток блокируется, пока не появится разрешение.
    
**`void release()`**: Освобождает разрешение, увеличивая счётчик на единицу. Это позволяет другому потоку получить доступ к ресурсу.
    
**`Semaphore(int permits, boolean fair)`**: Создаёт семафор с определённым числом разрешений и возможностью установки "справедливости" (`fair`). Если `fair` установлено в `true`, доступ будет предоставляться в порядке очереди ожидания потоков.

![[9da48f85b5874362bc2279f181613c0e.gif]]