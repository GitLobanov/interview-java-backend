Клонирование в Java — это процесс создания копии объекта. Существует два типа клонирования: поверхностное и глубокое. Эти методы отличаются по способу копирования данных объекта и могут использоваться в зависимости от требований к копированию.

### Поверхностное клонирование (Shallow Copy)

**Определение**: Поверхностное клонирование создаёт новый объект, который содержит копию значений всех полей исходного объекта. Если поле объекта — это ссылка на другой объект, то поверхностное клонирование копирует только ссылку, а не сам объект, на который она указывает. Это означает, что изменения в объектах, на которые ссылаются поля, отразятся на обоих клонированных объектах.

**Как это работает**:

1. **Создаётся новый объект**.
2. **Копируются значения всех полей**: если поле является примитивом или строкой, создаётся его копия. Если поле является ссылкой на другой объект, копируется только ссылка.

**Пример поверхностного клонирования**:

![[../../../_res/Pasted image 20240829135038.png]]

В этом примере при вызове метода `clone()` для объекта `Person` будет выполнено поверхностное клонирование, и поле `address` будет указывать на тот же объект `Address`, что и у оригинала.

### Глубокое клонирование (Deep Copy)

**Определение**: Глубокое клонирование создаёт новый объект, который содержит копию значений всех полей исходного объекта, включая копии объектов, на которые ссылаются поля. Это означает, что изменения в клонированных объектах не повлияют на оригинальный объект и наоборот.

**Как это работает**:

1. **Создаётся новый объект**.
2. **Копируются значения всех полей**: если поле является примитивом или строкой, создаётся его копия. Если поле является ссылкой на другой объект, создаётся новый объект и копируются значения его полей.

**Пример глубокого клонирования**:

![[../../../_res/Pasted image 20240829135107.png]]
В этом примере метод `clone()` для объекта `Person` вызывает клонирование также и для объекта `Address`, чтобы создать полную копию объекта `Person`.

### Сравнение

1. **Поверхностное клонирование**:
    
    - Простота реализации.
    - Не требует ручного клонирования вложенных объектов.
    - Может привести к неожиданным результатам, если вложенные объекты изменяются после клонирования.
2. **Глубокое клонирование**:
    
    - Более сложная реализация.
    - Обеспечивает независимость клонированных объектов от оригинальных.
    - Требует ручного клонирования всех вложенных объектов.

Выбор между поверхностным и глубоким клонированием зависит от потребностей вашего приложения. Если вам нужно полностью независимое копирование объектов, глубокое клонирование будет более подходящим, несмотря на дополнительную сложность. Если вам достаточно копии с общими вложенными объектами, поверхностное клонирование может быть более простым и быстрым решением.
