> Добавляет слой посредника, который обрабатывает запросы и ответы между клиентом и удаленным сервисом. Инкапсулирует клиента от сложностей взаимодействия с сервером, предоставляя унифицированный интерфейс. Централизованное управление. Включает дополнительные системы надёжности внутри себя: перезапуск запросов, тайм-ауты, повтор запросов и т.д. **Однако** дополнительная сложность и задержка на обработку.

![[../../../../_res/Pasted image 20240930135929.png]]

Приложениям и сервисам часто требуются общие функции, относящиеся к мониторингу, ведению журналов, настройкам безопасности, сетевым службам и так далее. Однако в микросервисной архитектуре отдельные сервисы могут быть построены с помощью различных языков и технологий — следовательно, они могут иметь свои зависимости и требовать определенных языковых библиотек. Паттерн Ambassador предлагает помещать клиентские фреймворки и библиотеки для решения периферийных задач внутрь вспомогательного сервиса, выступающего в роли Proxy между клиентским приложением или основным сервисом и прочими частями системы.

Применение паттерна Ambassador позволяет:

- Унифицировать обращение клиентских приложений к общим задачам независимо от используемого языка и фреймворка.
- Решать периферийные задачи, не затрагивая основную функциональность, в том числе за счет передачи разработки отдельным специализированным командам. Это полезно, например, при необходимости централизованного управления сетевыми вызовами и функциями безопасности — во избежание дублирования сложного кода на каждом компоненте отдельно.
- Добавлять новую функциональность в Legacy-приложения, которые тяжело поддаются рефакторингу.

Так как добавление Proxy пусть и незначительно, но увеличивает сетевые задержки, шаблон Ambassador не рекомендуется использовать, когда время задержки критично. Также паттерн лучше не применять в случаях, когда можно обойтись стандартной клиентской библиотекой — например, если используется всего один язык или нет возможности выделить общие периферийные задачи.

Развернуть Proxy можно как демон или службу. Если основной сервис является контейнерным, Proxy также разворачивается как отдельный контейнер на том же хосте, для этой цели используется другой паттерн — Sidecar.

![[../../../../_res/Pasted image 20241215104634.png]]