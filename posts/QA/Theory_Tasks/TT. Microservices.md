## QA

###### Общаемся с сервисом по REST, получили сетевую ошибку, кажется, что можно вызывать заново. Что настроить на своей стороне? - паттерн Retry - Если соседний сервис очень слабый, то постоянный retry еще больше его положит - увеличить промежутки времени между retry или паттерн circuit breaker

###### Сервис закупок хранит количества остатка товара на складе. Пользователь выбирает товары в приложении и видит, сколько товаров осталось. Этот сервис проскалирован и используется кеширование для количества остатка товара. Какой кеш лучше локальный или распределенный? - Если сделаем локально, будут ли проблемы? - С другой стороне, если товар в одном экземпляре, у каждого клиента это записано. Что может случиться?

###### Предположим, разработали микросервис на спринге и есть бизнес-логика по забору данных, есть “тонкое место”. Что делать будем, как решать проблему?

###### Действия при OutOfMemory. Сервис перезагружается каждые несколько часов

###### Сервис фото и публикации контента. Подскачил трафик и сервис стал медлонно обрабатывать пользовательские запроосы.

###### Есть сервис, который вызывает другой сервис по http. Мы используем RestTemplate или Feign Client. Мы должны взять метод, что-то сделать, обработать, в базу положить. И хотим весь процесс сделать асинхронным, чтобы метод не блочил систему. Как это реализовать?

###### **Есть API, мы торчим наружу get запросом, с помощью которого туда передается команда. В рамках API выбираются очень большие данные, их нужно будет отправить в Kafka. За месяц накапливается 2 млн записей таблицы и их нужно выгрузить в Kafka. Какие подводные камни могут быть, если наружу торчим get запросом? На фронт нужно отправить количество записей**

###### Есть бизнес, где функционал очень связан. Микросервис большой. Он может оставаться микросервисом? Или это уже монолит?

###### Есть один монолит на Java 11. Он содержит системы, которые надо вынести. С чего бы начал?

###### Есть сервис, который принимает REST запросы. Он ходит в БД, и запросы начинают тормозить. Мы поднимаем новый инстанс этого сервиса. Теперь запросы распределяются по двум подам. Опять число запросов увеличилось, опять тормозит, мы снова так поднимаем, пока не перестает помогать. То есть новый инстанс поднимаем, а запросы продолжают тормозить. В чем может быть проблема?


###### Запрос медленно работает Что делать?



###### Ситуация: пришли на нагрузочное тестирование, пошел траффик, оказалось что сервис (развернут в кубере) падает  с периодичностью например в 15 мин. - потому что превышает необходимую утилизацию памяти.  График утилизации Хипа в поряде, но рестарты из за памяти. Как ты думаешь, в чем проблема? Посмотрели - файл-дескрипторы ползут вверх. Что может быть?


###### Есть микросервис, пишешь метод в нем хочешь сходить параллельно в 2 других микросервиса что-то там подтянуть и у себя сагрегировать, что для этого будешь использовать? В каком пуле поток будет выполнятся твоя текущая задачка?

###### допустим нам нужно 3 instance нашего приложения, и необходим функционал который в определенное время ходит в базу и отправляет email, как сделать так чтобы это было сделано один раз?

###### Как гарантировано отправить сообщение в сторонний сервис в случае успешного завершения транзакции?

###### Система с генерацией отчета, нажал и почти моментально должен получить отчет по какой-то теме. На UI есть возможность выбора глубины желаемого отчета(в днях). Как это сделаешь?

###### Есть фронт-офис и бек-офис, в бек идут операции, есть третий компонент сверка, она реализована в виде библиотеки, подключаем ее, и при проверке оказывается, что операции не мэтчаться(не совпадают). Как бы ты стал исследовать почему они не мэтчаться?

###### К тебе пришли со своей библиотекой самописной и говорят, давай использовать ее в нашем проекте, решение нужно принять тебе. Как на онове чего ты примешь это решение

###### Есть твоя система и есть некоторые системы поставщики данных A, B, C, D, E. И есть реализация, в которой наша система получает реквест от фронта, ей нужно собрать какой-то набор данных, для этого она ходит рестами в 5 этих систем (A, B, C, D, E) получив все данные система может их аггрегировать и отдать ответ потребителю (Пример, отчет строится). Тестировщик приходит и говорит: ваш метод, который я дергаю, отрабатывает 200 секунд, сделайте что-нибудь. Какая тут будет стратегия, как бороться с такмим вещами? Что и как можно ускорить, как диагностировать?

###### есть наш сервис и есть внешние сервисы поставщики данных, мы 5 раз ходим к каждому сервису и соответственно каждый из сервисов отдает данные строго за 5 секунд. Общее время запроса условно было 25 секунд плюс время на аггрегацию данных. Мы хотим чтобы эти 5 запросов к пяти нашим поставщикам отрабатывали в параллель. У тебя спринговое приложение, что нужно использовать, как поступить, чтобы выполнить требование?

###### Допустим в блоке try вызывается ненадежный провайдер, в блоке catch - надежный. Столкнулись со следующей проблемой - в блоке try отвечает ошибкой через минуту ожидания и на каком-то ненулевом потоке все висят в try, ждут ответ от сервиса. Что можем сделать, чтобы не висеть на таких долгих ожиданиях

######  Есть у нас сервис, есть контроллер, метод сохраняет в базу и нам по кафке нужно отправить уведомление во внешнюю систему причем сделать это с гарантией доставки, если данные в базу записались, то мы гарантированно должны доставить сообщение во внешнюю систему по кафке, что тут может поломаться и как бы ты это реализовывал


######  вот представь у нас проблемы с сетью, вот 5 сервисов мы прошли и на 5-ом у нас ошибка, мы должны откатится. мы обратно по цепочке идем и откатываемся, но в 4 сервисе не можем откатится, что тогда?

###### У нас есть эндпоинт, который делает 5 вызовов в другие сервисы, и работает слишком долго, как это исправить? (Перейти на реактивщину, посмотреть explain)

######  Каким способом через cronJob можно поднять 3-5 реплик микросервисов, чтобы не было конфликтов?
###### Написали rest, все работает какое-то время, потом добавили ассинхронный процесс, который пишет в бд и все начала тормозить. Как понять в чем дело?

######  От чего отталкиваетесь , чтобы определить критерий шардирования и партиционирования

###### В проде 3 контейнера, каждый из которых реплика друг друга. И нам нужно сделать чтобы в каждый момент времени собирался какой то отчет, но это должна сделать только одна реплика из всех. Как это сделать? 

- [Guide to ShedLock with Spring](https://www.baeldung.com/shedlock-spring)
- [Leader Election in System Design](https://www.geeksforgeeks.org/leader-election-in-system-design/)
- [What is Leader Election in a Distributed System?](https://www.geeksforgeeks.org/what-is-leader-election-in-a-distributed-system/?ref=ml_lbp)
- 
