## Resources

- [Just-in-Time Kubernetes: Руководство начинающим для понимания основных концепций Kubernetes](https://habr.com/ru/companies/otus/articles/650231/)
- [Kubernetes для разработчиков | Илья Бочаров](https://www.youtube.com/watch?v=9ZxZ9gb9pQs)
- [Круглый стол «Нужно ли разработчику знать Kubernetes»](https://www.youtube.com/watch?v=XAuXswdHi5U&t=4s)
- 
## QA

###### Какие основные компоненты master node в Kubernetes?

- **etcd** — распределённое хранилище, которое хранит конфигурации и состояние кластера.
- **API server** — это точка взаимодействия для всех запросов в кластер, предоставляет REST API.
- **Scheduler** — назначает поды на рабочие узлы, основываясь на доступных ресурсах и других факторах.
- **Controller Manager** — следит за состоянием системы и корректирует его, если оно не соответствует желаемому состоянию, используя контроллеры, такие как Deployment, ReplicaSet и т. д.

[Kubernetes. Components](Kubernetes.%20Components.md)

###### Зачем master node нужен Scheduler?

- Для  распределения подов (pods) по рабочим узлам (worker nodes)
- Например VPA изменил требуемые ресурсы для пода, и решил пере деплоить их. Шедулер направляет в каких нодах лучше развернуть, чтобы было достаточно под новые требования 
- Когда поды требуют больше CPU или памяти, чем имеется на текущем узле, Scheduler действительно ищет узлы с подходящими характеристиками, чтобы разместить их там. Кроме того, он учитывает такие параметры, как доступность ресурсов, ограничения на узлы и т. д.

###### Что такое менеджер контроллеров?

**Controller Manager** — это компонент мастер-ноды Kubernetes, который управляет набором **контроллеров**. Эти контроллеры следят за состоянием кластера и приводят его к желаемому состоянию, описанному в манифестах (например, Deployment, StatefulSet, Service и т.д.).

[Контроллеры](Kubernetes.%20Components.md#Контроллеры)
###### Что такое kubelet и какую функцию он выполняет?

**Kubelet** — это агент, который работает на каждом рабочем узле (worker node) и взаимодействует с главным узлом (master). Заместитель мастера, следит на воркер нодой. Он отвечает за запуск контейнеров внутри подов на рабочем узле и за следование тому состоянию, которое описано в манифестах.

Kubelet подключается к среде выполнения контейнера с помощью _Container Runtime Interface_ (CRI). Интерфейс среды выполнения контейнера состоит из буферов протоколов, gRPC AP и библиотек.
###### Для чего нужен kube-proxy?

- **Сетевую коммуникацию** между сервисами и подами.
- направлять трафик к нужному поду, если он находится на этой ноде;
- или перенаправить трафик на другую ноду, где есть нужный под (через iptables или IPVS).
- Когда вы создаете сервис типа `ClusterIP`, kube-proxy настраивает правила, чтобы трафик на этот IP и порт перенаправлялся к одному из подов, связанных с сервисом.

###### Какие типы сервисов существуют в Kubernetes?

**ClusterIP** (по умолчанию):
    - Виден только внутри кластера.
    - Назначается внутренний IP-адрес.
**NodePort**:    
    - Открывает статический порт на каждой ноде кластера.
    - Доступен извне через `<NodeIP>:<NodePort>`.
**LoadBalancer**:    
    - Интегрируется с облачным провайдером (AWS, GCP) для создания внешнего балансировщика нагрузки.
    - Автоматически настраивает `NodePort` и `ClusterIP`.
**ExternalName**:    
    - Сопоставляет сервис с DNS-именем (например, `my-service → api.external.com`).
    - Не имеет селекторов и Endpoints.

#### В чем разница между Service Mesh и API Gateway?

![](Pasted%20image%2020250213101424.png)

#### Что такое Istio и Consul?

- **Istio**:
    - **Service Mesh** для Kubernetes и других платформ.
    - Основные компоненты: **Envoy** (sidecar-прокси), **Pilot** (управление конфигурацией), **Citadel** (безопасность), **Galley** (валидация).
    - Функции: управление трафиком, mTLS, метрики, трассировка через Jaeger, Canary-развертывания.
        
- **Consul**:
    - Продукт **HashiCorp**, сочетающий **Service Mesh** и **Service Discovery**.
    - Работает в гибридных средах (Kubernetes, VM, bare-metal).
    - Использует **Connect** для mTLS и авторизации, поддерживает multiple DC.
    - Интегрируется с Kubernetes через Consul Helm-чарт.

#### Какие существуют стратегии деплоя в Kubernetes?

-	Blue-green deploy – 2 среды развертывания – green – основной рабочий проект, blue – новая версия, стратегия в том, что б начинать перенаправлять трафик на blue проект для его тестирования, если проект упадет – вернуть трафик на green, исправить blue, если blue cправляется успешно – заменить green – blue 
-	Canary-deploy – предоставление новой версии для ограниченного кол-во пользователей.
-	Rolling deployment – поочередное развертывание на разных серверах.
-	Feature toggled – внедрение нового функционала сразу в рабочую версию, при помощи флага функционал отключается до тех пор, пока не убедятся в его правильности.
-	Shadow deployment – теневое развертывание, использует 2 среды, первая основная, другая тестовая , запросы с основной дублируются на теневую для проверки работоспособности.
-	Recreate deployment – удалить старую – вставить новую.

[Kubernetes. Kind. Deployment](Kubernetes.%20Kind.%20Deployment.md)

8. Основные компоненты worker node

Рабочий узел (node) — это сервер (виртуальная машина, физический сервер и т. д.), который запускает приложения с помощью Pod и управляется главным узлом. Pods планируются на рабочих узлах, которые имеют необходимые инструменты для их запуска и подключения. Pod — это единица планирования в Kubernetes. Это логическая коллекция одного или нескольких контейнеров, которые всегда планируются вместе.

Рабочий узел имеет следующие компоненты:

- Container runtime
- kubelet
- kube-proxy

9. Что нужно знать о кубере разработчику?

- **Во-первых**, как работает Kubernetes для того, чтобы запустить в нём приложение. То есть, что происходит в кластере, когда разработчик делает `kubectl apply -f deploy.yaml`. Например, почему деплой прошел, а Pod`ы находятся в статусе pending? В таком случае нет смысла смотреть controller-manager. Можно посмотреть в describe Deployment`а и увидеть, что там создался ReplicaSet. Вот знать не необходимо, но это очень хорошо позволяет понимать, что происходит с кластером Kubernetes и почему твои приложения запускаются или не запускаются или запускаются долго и так далее.
- **Во-вторых**, хорошо бы, но не обязательно знать об инфраструктурных ограничениях, которые есть в кластере. О том, что там есть ресурсы, CPU, память, что эти ресурсы могут ограничивать админы. Что есть такие объекты как Limit Range и Resource Quota, их админы применяют, чтобы ограничивать ресурсы и разделять разделять ресурсы по пространствам имен (namespace).
- **Дальше**: разработчику тоже хорошо бы знать, что есть в кластере процессы аутентификации и авторизации, что есть такая штука как RBAC (Role-Based Access Control). Все это используется админами, чтобы разделять права в кластере.Что вообще в кластере есть какие-то права.
- Основные абстракции которые есть в Kubernetes: Pod, Deployment, ReplicaSet, StatefulSet, Job, CronJob. Это всё нужно просто потому, что это то, что описывает твое приложение в рамках кластера Kubernetes.
- 


10. Что такое Resource Quota

11. Что такое RBAC Kubernetes

12. Что такое Pod Disruption Budget.


###### Какие виды сервисов есть?

###### Что поднимает контейнеры в подах?

